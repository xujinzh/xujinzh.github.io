<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>J. Xu - 众妙之门</title><meta name="author" content="Jinzhong Xu"><meta name="copyright" content="Jinzhong Xu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="众妙之门">
<meta property="og:type" content="website">
<meta property="og:title" content="J. Xu">
<meta property="og:url" content="https://xujinzh.github.io/page/7/index.html">
<meta property="og:site_name" content="J. Xu">
<meta property="og:description" content="众妙之门">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xujinzh.github.io/img/silence.jpg">
<meta property="article:author" content="Jinzhong Xu">
<meta property="article:tag" content="数学、计算机视觉、计算机应用技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xujinzh.github.io/img/silence.jpg"><link rel="shortcut icon" href="/img/letter-j.png"><link rel="canonical" href="https://xujinzh.github.io/page/7/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'J. Xu',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2025-06-18 09:36:37'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/silence.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">415</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">320</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="J. Xu"><img class="site-icon" src="/img/letter-j.png"/><span class="site-name">J. Xu</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2023/08/04/linux-look-domain-ip/" title="Linux 上查看某域名 IP 的几个方法"><img class="post-bg" src="/img/c26.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux 上查看某域名 IP 的几个方法"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/08/04/linux-look-domain-ip/" title="Linux 上查看某域名 IP 的几个方法">Linux 上查看某域名 IP 的几个方法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-08-04T01:25:46.000Z" title="发表于 2023-08-04 09:25:46">2023-08-04</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.100Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/linux/">linux</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/ip/">ip</a></span></div><div class="content">本篇介绍几个使用 Linux 终端命令查看域名 IP 地址的方法，所有命令都是在 Ubuntu 上测试，以普通用户运行。


pingping 命令通过向网络主机（某域名或某 IP）发送 ICMP ECHO_REQUEST 数据包来测试网络的联通性。当 ping 的对象是某域名时，能够返回该域名的 IP 地址。
1ping arxiv.org -c 3
结果
1234PING arxiv.org (128.84.21.199) 56(84) bytes of data.--- arxiv.org ping statistics ---3 packets transmitted, 0 received, 100% packet loss, time 2029ms

fpingfping 命令类似 ping，也是通过向网络主机（某域名或某 IP）发送 ICMP ECHO_REQUEST 数据包来测试网络的联通性。与 ping 不同的是 fping 能够同时指定任意多个网络主机（域名或 IP）
安装1sudo apt update &amp;&amp; sudo apt install fp ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/07/21/ubuntu-limit-netword-card-bandwidth/" title="Ubuntu 限制网络速度"><img class="post-bg" src="/img/c2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ubuntu 限制网络速度"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/07/21/ubuntu-limit-netword-card-bandwidth/" title="Ubuntu 限制网络速度">Ubuntu 限制网络速度</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-07-21T06:08:07.000Z" title="发表于 2023-07-21 14:08:07">2023-07-21</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.108Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ubuntu/">ubuntu</a></span></div><div class="content">本篇介绍一种限制 Ubuntu 网卡带宽的方法。


安装12sudo apt updatesudo apt install wondershaper

使用12345# 限制网卡 eno1 的带宽，下载速度为 200kb/s，上传速度为 24kb/ssudo wondershaper eno1 2000 240# 取消网卡限速sudo wondershaper clear eno1

参考文献
Ubuntu 网络限速
Wondershaper在Ubuntu中限制网卡速度带宽

</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/06/30/linux-view-compressed-file/" title="Linux 查看压缩文件内容"><img class="post-bg" src="/img/c20.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux 查看压缩文件内容"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/06/30/linux-view-compressed-file/" title="Linux 查看压缩文件内容">Linux 查看压缩文件内容</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-30T12:47:38.000Z" title="发表于 2023-06-30 20:47:38">2023-06-30</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.100Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/linux/">linux</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/zip/">zip</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/rar/">rar</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/tar/">tar</a></span></div><div class="content">当一个压缩包比较大的时候，如何快速知道里面的文件名称，本篇介绍 Linux 上查看压缩包内文件名称的方法。


rar 压缩包123rar v archive.rarunrar l archive.rar

zip 压缩包12345zip -sf archive.zipunzip -l archive.zipzipinfo archive.zip

参考文献
Linux下查看压缩文件内容的 10 种方法

</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/06/05/pytorch-fine-tuning-model/" title="PyTorch 迁移学习之模型结构修改和参数微调"><img class="post-bg" src="/img/c29.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PyTorch 迁移学习之模型结构修改和参数微调"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/06/05/pytorch-fine-tuning-model/" title="PyTorch 迁移学习之模型结构修改和参数微调">PyTorch 迁移学习之模型结构修改和参数微调</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-05T14:05:17.000Z" title="发表于 2023-06-05 22:05:17">2023-06-05</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/pytorch/">pytorch</a></span></div><div class="content">PyTorch 迁移学习实例。使用 resnet 模型框架在 cifar10 数据集上进行模型迁移学习。


导入依赖包123456789101112import copyimport osfrom datetime import datetimeimport matplotlib.pyplot as pltimport numpy as npimport torchimport torch.optim as optimimport visdomfrom torch import nnfrom torch.utils.data import DataLoaderfrom torchvision import datasets, models, transforms


12torch.manual_seed(33)device = torch.device(&quot;cuda&quot; if torch.cuda.is_available() else &quot;cpu&quot;)

数据读取与预处理操作数据结构数如下：
$ tree -L 2 &#x2F;disk1&#x2F ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/06/05/pytorch-model-save-and-retrain/" title="PyTorch 模型保存与再训练"><img class="post-bg" src="/img/c9.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PyTorch 模型保存与再训练"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/06/05/pytorch-model-save-and-retrain/" title="PyTorch 模型保存与再训练">PyTorch 模型保存与再训练</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-05T09:05:17.000Z" title="发表于 2023-06-05 17:05:17">2023-06-05</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/pytorch/">pytorch</a></span></div><div class="content">PyTorch 模型保存与再训练，基于 MNIST 数据集。


导入依赖包123456789import osimport matplotlib.pyplot as pltimport torchimport torch.nn as nnimport torch.nn.functional as Fimport torch.optim as optimimport torchvisionfrom torch.utils.data import DataLoader

加载数据123456789n_epochs = 10batch_size_train = 128batch_size_test = 1000learning_rate = 0.01momentum = 0.5log_interval = 20torch.manual_seed(33)device = torch.device(&quot;cuda:1&quot; if torch.cuda.is_available() else &quot;cpu&quot;)device




device(type=&#39;cu ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/06/01/linux-permanently-delete-file-dir/" title="Linux 安全（永久）删除文件和文件夹"><img class="post-bg" src="/img/c29.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux 安全（永久）删除文件和文件夹"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/06/01/linux-permanently-delete-file-dir/" title="Linux 安全（永久）删除文件和文件夹">Linux 安全（永久）删除文件和文件夹</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-06-01T07:18:54.000Z" title="发表于 2023-06-01 15:18:54">2023-06-01</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.100Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/linux/">linux</a></span></div><div class="content">Linux 系统上的文件或文件夹的安全（永久）删除常用的方法有 shred, wipe 和 srm，下面对其进行介绍。


shred 重写覆盖删除文件安装
12sudo apt updatesudo apt install shred
使用
12# 删除文件 filepath.txt shred -uvz -n 5 filepath.txt
其中，各参数含义：

u 覆盖后截断并删除文件
v 显示进度
z 最后一次用0覆盖，以隐藏覆盖操作
n 指定覆盖文件内容的次数，默认是3

更多参数及解释请使用命令 man shred 查看
该方法只能覆盖重写删除文件，无法处理文件夹。
wipe 永久删除磁存储器的文件和文件夹安装
12sudo apt updatesudo apt install wipe
使用
1wipe -rfi dirpath
其中，各参数含义：

r 递归子目录
f 强制删除，不用确认
i 显示进度

更多参数及解释请使用命令 man wipe 查看
该方法只能删除磁存储器，对于固态硬盘需要使用其他方法，如下面的方法。
srm 安全删除文件和文件夹安装
12sudo a ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/05/31/pytorch-mnist-classify/" title="PyTorch 进行 MNIST 图片分类"><img class="post-bg" src="/img/c22.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PyTorch 进行 MNIST 图片分类"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/05/31/pytorch-mnist-classify/" title="PyTorch 进行 MNIST 图片分类">PyTorch 进行 MNIST 图片分类</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-31T06:05:17.000Z" title="发表于 2023-05-31 14:05:17">2023-05-31</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/pytorch/">pytorch</a></span></div><div class="content">PyTorch 图像分类，数据集采用内置的 MNIST.


加载数据集12345678910111213import matplotlib.pyplot as pltimport numpy as npimport torchimport torchvisionimport visdomfrom torch import nnfrom torch.utils.data import DataLoaderfrom torchvision import transformstorch.manual_seed(33)device = torch.device(&quot;cuda:0&quot; if torch.cuda.is_available() else &quot;cpu&quot;)device




device(type=&#39;cuda&#39;, index=0)

12345678910111213train_ds = torchvision.datasets.MNIST(    &quot;/workspace/disk1/datasets/&quot;,    ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/05/30/pytorch-mlp/" title="PyTorch 多层感知机"><img class="post-bg" src="/img/c26.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PyTorch 多层感知机"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/05/30/pytorch-mlp/" title="PyTorch 多层感知机">PyTorch 多层感知机</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-30T09:01:17.000Z" title="发表于 2023-05-30 17:01:17">2023-05-30</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/pytorch/">pytorch</a></span></div><div class="content">PyTorch 多层感知机，数据集来自：nivedithabhandary&#x2F;HR-Analytics


数据预处理12345678import matplotlib.pyplot as pltimport numpy as npimport pandas as pdimport torchfrom sklearn.model_selection import train_test_splitfrom torch.utils.data import TensorDatasettorch.manual_seed(33)




&lt;torch._C.Generator at 0x7fabe84e8e90&gt;

1path = &quot;/workspace/disk1/datasets/scalar/HR_comma_sep.csv&quot;


12data = pd.read_csv(path)data.head(3)






    .dataframe tbody tr th:only-of-type {
        vertical-align:  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/05/30/pytorch-logistic-regression/" title="PyTorch 逻辑回归"><img class="post-bg" src="/img/c2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PyTorch 逻辑回归"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/05/30/pytorch-logistic-regression/" title="PyTorch 逻辑回归">PyTorch 逻辑回归</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-30T06:05:17.000Z" title="发表于 2023-05-30 14:05:17">2023-05-30</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/pytorch/">pytorch</a></span></div><div class="content">PyTorch 逻辑回归，数据集：UCI Iris Data Set


导入依赖包1234567import matplotlib.pyplot as pltimport numpy as npimport pandas as pdimport torchimport torch.nn as nnimport torch.optim as optimimport visdom


1torch.__version__, torch.manual_seed(33)




(&#39;1.12.1+cu102&#39;, &lt;torch._C.Generator at 0x7f753ca60e90&gt;)

加载数据集1path = &quot;/workspace/disk1/datasets/scalar/iris.data.csv&quot;


12data = pd.read_csv(path)data.head(3)






    .dataframe tbody tr th:only-of-type {
        vertical-align: midd ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2023/05/29/pytorch-linear-regression/" title="PyTorch 线性回归"><img class="post-bg" src="/img/c17.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PyTorch 线性回归"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/05/29/pytorch-linear-regression/" title="PyTorch 线性回归">PyTorch 线性回归</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-29T08:55:17.000Z" title="发表于 2023-05-29 16:55:17">2023-05-29</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/pytorch/">pytorch</a></span></div><div class="content">利用 PyTorch 进行线性回归，采用 kaggle 波士顿房价预测数据集


导入依赖包1234567import matplotlib.pyplot as pltimport numpy as npimport pandas as pdimport torchimport torch.nn as nnimport torch.optim as optimimport visdom


1torch.__version__




&#39;1.12.1+cu102&#39;

加载数据123path = &quot;/workspace/disk1/datasets/scalar/train_dataset.csv&quot;data = pd.read_csv(path)data.head(3)






    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

.dataframe tbody tr th &#123;
    vertical-align: top;
& ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2023/05/07/linux-rename-filenames-in-batches/" title="Linux 批量修改文件名"><img class="post-bg" src="/img/c2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Linux 批量修改文件名"></a></div><div class="recent-post-info"><a class="article-title" href="/2023/05/07/linux-rename-filenames-in-batches/" title="Linux 批量修改文件名">Linux 批量修改文件名</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2023-05-07T05:57:45.000Z" title="发表于 2023-05-07 13:57:45">2023-05-07</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.100Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/linx/">linx</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/rename/">rename</a></span></div><div class="content">Linux 中有一些命令能够非常方便的修改文件名，如 rename 等。本篇注意介绍 Ubuntu 系统中该命令的一般使用方法。


安装123456# Debian/Ubuntu 安装方法sudo apt updatesudo apt install -y rename# Mac 安装方法brew install rename

使用本篇介绍的 rename 版本是 Perl 版本，还有 C 版本，使用方法参见博文：Linux 批处理：修改文件名和文件内容
Linux 中修改单个文件名的方法是 mv 命令，我们可以借助管道符修改多个文件的文件名：
123456ls `pwd`# 结果如下，包含两个以 .txt 结尾的文件# hello.txt world.txt# 修改文件扩展名为 .pyfind `pwd` -name &#x27;*.txt&#x27; | awk -F &#x27;.&#x27; &#x27;&#123;print $1&#125;&#x27; | xargs -I &#123;&#125; mv &#123;&#125;.txt &#123;&#125;.py ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/6/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/#content-inner">6</a><span class="page-number current">7</span><a class="page-number" href="/page/8/#content-inner">8</a><span class="space">&hellip;</span><a class="page-number" href="/page/38/#content-inner">38</a><a class="extend next" rel="next" href="/page/8/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/silence.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jinzhong Xu</div><div class="author-info__description">众妙之门</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">415</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">320</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">28</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xujinzh"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xujinzh" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xujinzhong027@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://www.mathscv.com" target="_blank" title="MathsCVBlog"><i class="fab fa-j"></i></a><a class="social-icon" href="https://xujinzh.github.io" target="_blank" title="GitHubBlog"><i class="fab fa-github-alt"></i></a><a class="social-icon" href="https://www.mathscv.com/power" target="_blank" title="MathsCVPower"><i class="fab fa-m"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">日本核污染水强排入海！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2025/04/24/windows-office-delete-review-revise/" title="word 中快速的删除或接收修订"><img src="/img/c13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="word 中快速的删除或接收修订"/></a><div class="content"><a class="title" href="/2025/04/24/windows-office-delete-review-revise/" title="word 中快速的删除或接收修订">word 中快速的删除或接收修订</a><time datetime="2025-04-24T14:05:36.000Z" title="发表于 2025-04-24 22:05:36">2025-04-24</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/16/cplusplus-opencv/" title="c++ 中调用 opencv"><img src="/img/c19.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="c++ 中调用 opencv"/></a><div class="content"><a class="title" href="/2024/12/16/cplusplus-opencv/" title="c++ 中调用 opencv">c++ 中调用 opencv</a><time datetime="2024-12-16T09:33:13.000Z" title="发表于 2024-12-16 17:33:13">2024-12-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/16/ubuntu-aptitude/" title="ubuntu 包管理工具 aptitude"><img src="/img/c22.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ubuntu 包管理工具 aptitude"/></a><div class="content"><a class="title" href="/2024/12/16/ubuntu-aptitude/" title="ubuntu 包管理工具 aptitude">ubuntu 包管理工具 aptitude</a><time datetime="2024-12-16T06:38:39.000Z" title="发表于 2024-12-16 14:38:39">2024-12-16</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/12/02/linux-transport-endpoint-is-not-connected/" title="transport endpoint is not connected"><img src="/img/c10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="transport endpoint is not connected"/></a><div class="content"><a class="title" href="/2024/12/02/linux-transport-endpoint-is-not-connected/" title="transport endpoint is not connected">transport endpoint is not connected</a><time datetime="2024-12-02T05:37:05.000Z" title="发表于 2024-12-02 13:37:05">2024-12-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/11/29/python-compile-package-py/" title="python 编译或打包 py 文件"><img src="/img/c25.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="python 编译或打包 py 文件"/></a><div class="content"><a class="title" href="/2024/11/29/python-compile-package-py/" title="python 编译或打包 py 文件">python 编译或打包 py 文件</a><time datetime="2024-11-29T09:11:28.000Z" title="发表于 2024-11-29 17:11:28">2024-11-29</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/"><span class="card-category-list-name">maths</span><span class="card-category-list-count">34</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/algebra/"><span class="card-category-list-name">algebra</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/application/"><span class="card-category-list-name">application</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/mathematical-analysis/"><span class="card-category-list-name">mathematical analysis</span><span class="card-category-list-count">22</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/mathematician/"><span class="card-category-list-name">mathematician</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/optimization/"><span class="card-category-list-name">optimization</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/probability/"><span class="card-category-list-name">probability</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/topology/"><span class="card-category-list-name">topology</span><span class="card-category-list-count">1</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/opencv/" style="font-size: 1.21em; color: #999ea4">opencv</a> <a href="/tags/mail/" style="font-size: 1.16em; color: #999b9e">mail</a> <a href="/tags/research/" style="font-size: 1.1em; color: #999">research</a> <a href="/tags/vlc/" style="font-size: 1.1em; color: #999">vlc</a> <a href="/tags/librealsense/" style="font-size: 1.1em; color: #999">librealsense</a> <a href="/tags/clion/" style="font-size: 1.1em; color: #999">clion</a> <a href="/tags/redis/" style="font-size: 1.1em; color: #999">redis</a> <a href="/tags/openssh/" style="font-size: 1.1em; color: #999">openssh</a> <a href="/tags/reboot/" style="font-size: 1.1em; color: #999">reboot</a> <a href="/tags/nat/" style="font-size: 1.1em; color: #999">nat</a> <a href="/tags/nvidia/" style="font-size: 1.21em; color: #999ea4">nvidia</a> <a href="/tags/clustering/" style="font-size: 1.1em; color: #999">clustering</a> <a href="/tags/systemctl/" style="font-size: 1.1em; color: #999">systemctl</a> <a href="/tags/graph/" style="font-size: 1.1em; color: #999">graph</a> <a href="/tags/numpy/" style="font-size: 1.16em; color: #999b9e">numpy</a> <a href="/tags/code-server/" style="font-size: 1.1em; color: #999">code-server</a> <a href="/tags/definite-integral/" style="font-size: 1.33em; color: #99a2af">definite integral</a> <a href="/tags/proxy/" style="font-size: 1.16em; color: #999b9e">proxy</a> <a href="/tags/pytorch/" style="font-size: 1.39em; color: #99a4b4">pytorch</a> <a href="/tags/gitalk/" style="font-size: 1.1em; color: #999">gitalk</a> <a href="/tags/apscheduler/" style="font-size: 1.1em; color: #999">apscheduler</a> <a href="/tags/torch/" style="font-size: 1.16em; color: #999b9e">torch</a> <a href="/tags/vot/" style="font-size: 1.27em; color: #99a0a9">vot</a> <a href="/tags/json/" style="font-size: 1.1em; color: #999">json</a> <a href="/tags/python/" style="font-size: 1.5em; color: #99a9bf">python</a> <a href="/tags/normalization/" style="font-size: 1.16em; color: #999b9e">normalization</a> <a href="/tags/ip/" style="font-size: 1.21em; color: #999ea4">ip</a> <a href="/tags/notebook/" style="font-size: 1.1em; color: #999">notebook</a> <a href="/tags/gradient/" style="font-size: 1.1em; color: #999">gradient</a> <a href="/tags/mmcv/" style="font-size: 1.16em; color: #999b9e">mmcv</a> <a href="/tags/gradio/" style="font-size: 1.1em; color: #999">gradio</a> <a href="/tags/limit/" style="font-size: 1.1em; color: #999">limit</a> <a href="/tags/ssh/" style="font-size: 1.44em; color: #99a7ba">ssh</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><span class="card-archive-list-count">2</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><span class="card-archive-list-count">6</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">415</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-07-16T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">475.3k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2025-06-18T01:36:34.321Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2025 By Jinzhong Xu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const findTrueUrl = (array) => {
    Promise.all(array.map(item =>
      fetch(item.url).then(resp => resp.json()).then(data => {
        const urlArray = data.body.match(/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/ig)
        if (data.user.login === 'utterances-bot') {
          return urlArray.pop()
        } else {
          return urlArray.shift()
        }
      })
    )).then(res => {
        array = array.map((i,index)=> {
          return {
            ...i,
            url: res[index]
          }
        })

        saveToLocal.set('github-newest-comments', JSON.stringify(array), 10/(60*24))
        generateHtml(array)
    });
  }

  const getComment = () => {
    fetch('https://api.github.com/repos/xujinzh/xujinzh.github.io/issues/comments?sort=updated&direction=desc&per_page=6&page=1',{
      "headers": {
        Accept: 'application/vnd.github.v3.html+json'
      }
    })
      .then(response => response.json())
      .then(data => {
        const githubArray = data.map(item => {
          return {
            'avatar': item.user.avatar_url,
            'content': changeContent(item.body_html),
            'nick': item.user.login,
            'url': item.issue_url,
            'date': item.updated_at,
            'githubUrl': item.html_url
          }
        })
        findTrueUrl(githubArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('github-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="众,妙,之,门" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>