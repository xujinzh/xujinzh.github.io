<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>J. Xu - 众妙之门</title><meta name="author" content="Jinzhong Xu"><meta name="copyright" content="Jinzhong Xu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="众妙之门">
<meta property="og:type" content="website">
<meta property="og:title" content="J. Xu">
<meta property="og:url" content="https://xujinzh.github.io/page/11/index.html">
<meta property="og:site_name" content="J. Xu">
<meta property="og:description" content="众妙之门">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xujinzh.github.io/img/silence.jpg">
<meta property="article:author" content="Jinzhong Xu">
<meta property="article:tag" content="数学、计算机视觉、计算机应用技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xujinzh.github.io/img/silence.jpg"><link rel="shortcut icon" href="/img/letter-j.png"><link rel="canonical" href="https://xujinzh.github.io/page/11/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'J. Xu',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-03-19 09:28:01'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/silence.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">392</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">302</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">26</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="J. Xu"><img class="site-icon" src="/img/letter-j.png"/><span class="site-name">J. Xu</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/06/15/sherman-morrison-formula/" title="Sherman Morrison 公式"><img class="post-bg" src="/img/c21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Sherman Morrison 公式"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/15/sherman-morrison-formula/" title="Sherman Morrison 公式">Sherman Morrison 公式</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-15T07:39:19.000Z" title="发表于 2022-06-15 15:39:19">2022-06-15</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/maths/">maths</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/maths/algebra/">algebra</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/maths/">maths</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/algebra/">algebra</a></span></div><div class="content">在线性代数中，Sherman-Morrison 公式以 Jack Sherman 和 Winifred J. Morrison 命名，用于计算 $A + uv^T$ 的逆，其中 $A$ 为可逆方阵，$u, v$ 为列向量，$uv^T$ 为向量外积（outer product）。Sherman-Morrison 公式是 Woodbury 公式的一类特殊情况。


问题陈述定理1（Sherman-Morrison formula）  假设 $A \in \mathbb{R}^{n\times n}$ 是一个可逆方阵，并且 $u, v\in \mathbb{R}^n$ 是列向量。那么 $A + uv^T$ 是可逆的当且仅当 $1 + v^T A^{-1} u \neq 0$. 当 $A + uv^T$ 可逆时，满足如下等式：
$$(A + uv^T)^{-1} &#x3D; A^{-1} - \frac{A^{-1}uv^TA^{-1}}{1+v^TA^{-1}u} \tag{i}.$$
这里，$uv^T$ 表示两个向量 $u,v$ 的外积。
外积（outer product）说明：假设
$ ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/06/10/linux-check-ip-domain/" title="linux 上查询 ip 归属地"><img class="post-bg" src="/img/c1.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="linux 上查询 ip 归属地"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/10/linux-check-ip-domain/" title="linux 上查询 ip 归属地">linux 上查询 ip 归属地</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-10T12:58:51.000Z" title="发表于 2022-06-10 20:58:51">2022-06-10</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.100Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/linux/">linux</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/ip/">ip</a></span></div><div class="content">公网 ip 地址唯一标识了服务器在互联网上的地址。那如何知道自己服务器的公网 ip 地址，又如何知道某一个 ip 地址的归属地呢？本篇介绍一个命令来查询上面的信息。所有命令以普通用户运行。


查询自己电脑的公网 ip123456# linux or Mac curl cip.cc# Windowstelnet cip.ccftp cip.cc

结果类似下面这样，ip 地址不同输出结果不同
12345678IP	: 43.188.123.xxx地址	: 日本  日本数据二	: 日本数据三	: 中国 | 腾讯URL	: http://www.cip.cc/43.188.123.xxx



如果只想知道自己的电脑的 ip 地址，不想输出其他信息
123456# linux or Mac curl ip.cip.cc# Windowstelnet ip.cip.ccftp ip.cip.cc

结果只有 ip 地址。
查询 ip 地址归属地该命令只需要在上面的命令中增加 ip 地址即可，方法如下
123456# linux or Mac curl cip.cc/43.188.123.xx ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/06/08/sshfs-mount-rfs-over-ssh/" title="使用 sshfs 挂载远程文件系统"><img class="post-bg" src="/img/c7.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用 sshfs 挂载远程文件系统"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/08/sshfs-mount-rfs-over-ssh/" title="使用 sshfs 挂载远程文件系统">使用 sshfs 挂载远程文件系统</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-08T06:20:14.000Z" title="发表于 2022-06-08 14:20:14">2022-06-08</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ubuntu/">ubuntu</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/linux/">linux</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/ssh/">ssh</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/sshfs/">sshfs</a></span></div><div class="content">在两台服务器间借助 SSH 连接使用 SFTP 或 SCP 可以互相传输文件，但这确不能共享整个文件系统。当我们想要像访问本地服务器的文件系统一样访问远程服务器的文件系统时，可以使用 sshfs 工具，它通过 SSH 文件传输协议 (SFTP) 挂载远程的文件系统。本篇以 ubuntu 系统为例，所有代码以普通用户运行，部分代码需要 sudo 权限。


安装12sudo apt updatesudo apt install sshfs

挂载远程服务器文件系统假设本地的用户 jinzhongxu 能够通过 SSH 连接到远程服务器 tencent.test.com
123456# 创建挂载点sudo mkdir /mnt/tencentsudo chown -R jinzhongxu:jinzhongxu /mnt/tencent# 挂载远程文件系统到挂载点sshfs jinzhongxu@tencent.test.com:/home/jinzhongxu /mnt/tencent -o allow_other -o reconnect

注意，挂载时因为指定了 reconnect  ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/06/03/apt-and-apt-get/" title="apt 和 apt-get 命令的区别"><img class="post-bg" src="/img/c30.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="apt 和 apt-get 命令的区别"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/03/apt-and-apt-get/" title="apt 和 apt-get 命令的区别">apt 和 apt-get 命令的区别</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-03T08:56:12.000Z" title="发表于 2022-06-03 16:56:12">2022-06-03</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-20T02:31:22.487Z" title="更新于 2024-02-20 10:31:22">2024-02-20</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/apt/">apt</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/debian/">debian</a></span></div><div class="content">Debian 作为 Ubuntu、Linux Mint 和 elementary OS 等 Linux 操作系统的母板，Debian 类使用一套名为 Advanced Packaging Tool（APT，请不要把它与 apt 命令混淆）的工具来管理软件包。


最常用的 Debian 类包管理命令都被分散在了 apt-get、apt-cache 和 apt-config 这三条命令当中。apt 命令的引入就是为了解决命令过于分散的问题，它包括了 apt-get 命令出现以来使用最广泛的功能选项，以及 apt-cache 和 apt-config 命令中很少用到的功能。在使用 apt 命令时，用户不必再由 apt-get 转到 apt-cache 或 apt-config，而且 apt 更加结构化，并为用户提供了管理软件包所需的必要选项。简单来说就是 apt &#x3D; apt-get、apt-cache 和 apt-config 中最常用命令选项的集合。
apt 和 apt-get 的区别虽然 apt 与 apt-get 有一些类似的命令选项，但它并不能完全向下兼容 apt-get ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/06/03/debian-install-ftp/" title="在 debian 服务器上安装 ftp"><img class="post-bg" src="/img/c25.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在 debian 服务器上安装 ftp"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/03/debian-install-ftp/" title="在 debian 服务器上安装 ftp">在 debian 服务器上安装 ftp</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-03T06:57:18.000Z" title="发表于 2022-06-03 14:57:18">2022-06-03</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.092Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/debian/">debian</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/linux/">linux</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/ftp/">ftp</a></span></div><div class="content">FTP（File Transfer Protocol，文件传输协议）是一种标准的网络协议，用于在远程网络之间传输文件。注意区分 SFTP，其是 SSH 文件传输协议 (SSH File Transfer Protocol)，该协议具有安全性。SCP 代表安全复制协议，它对Linux 系统之间的文件传输进行加密。而 FTP 不具有安全性，是明文传输，但可以搭配 SSL&#x2F;TLS，实现 FTPS 进行安全传输。本篇以 Debian 10 为例，所有命令以普通用户运行，部分命令可能需要 sudo 权限。


安装12sudo apt updatesudo apt install vsftpd

安装后，系统默认会配置自启动，查看服务是否启动
1sudo systemctl status vsftpd

配置申请证书安装后，最重要的就是配置，首先配置 SSL，申请证书请查看我的另一篇：搭配 nginx、cloudflare 和 acme.sh 让网站走 https 协议
这里给出一种自签证书的方法，可以自定义证书有效期。假设，我们要创建一个有效期为 10 年的 2048 为私钥和自签名 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/29/install-bitnami-redmine/" title="bitnami redmine 的安装"><img class="post-bg" src="/img/c29.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="bitnami redmine 的安装"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/29/install-bitnami-redmine/" title="bitnami redmine 的安装">bitnami redmine 的安装</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-29T04:44:55.000Z" title="发表于 2022-05-29 12:44:55">2022-05-29</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.096Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/redmine/">redmine</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/bitnami/">bitnami</a></span></div><div class="content">Redmine 是一个网页界面的项目管理与缺陷跟踪管理系统的自由及开放源代码软件工具，可以同时处理多个项目。它集成了项目管理所需的各项功能，包括日历、燃尽图和甘特图以协助可视化表现项目与时间限制，问题跟踪和版本控制。本篇介绍如何安装 Redmine，以 Bitnami Redmine + Debian 10 为例，所有命令以普通用户 jinzhongxu 运行，但需要 sudo 权限。


下载安装 Redmine这里提供两个版本，均是 bitnami 官网版本：

bitnami-redmine-3.4.6-5-linux-x64-installer.run
bitnami-redmine-4.2.1-3-linux-x64-installer.run

本篇以 4.2.1-3 为例，并使用 nginx 作为反向代理。需要注意的是，需要开放个别端口：

3690：svnserve
3306：mysqld
8443：httpd
8080：redmine
80，443：nginx

1234567891011121314151617181920212223242526272829# 版本 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/28/debian-install-mysql/" title="debian 安装 mysql 数据库"><img class="post-bg" src="/img/c24.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="debian 安装 mysql 数据库"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/28/debian-install-mysql/" title="debian 安装 mysql 数据库">debian 安装 mysql 数据库</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-28T04:16:13.000Z" title="发表于 2022-05-28 12:16:13">2022-05-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.092Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/debian/">debian</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/mysql/">mysql</a></span></div><div class="content">MySQL 数据库一个关系数据库管理系统 (Relational Database Management System, RDBMS) ，最初是有瑞典的MySQL AB 公司开发，2008 年该公司被昇阳微系统收购。2009 年，甲骨文公司收购昇阳微系统公司，MySQL 就成为了 Oracle 产品。其性能高、成本低、可靠性好，一度成为最流行的开源数据库。非常流行的开源软件组合 LAMP 中的 “M” 指的就是 MySQL。MySQL 分为免费的社区版与收费的标准版、企业版等。甲骨文公司收购 MySQL 后，大幅调涨 MySQL 商业版的售价，自由软体社群们对于 Oracle 是否还会持续支援 MySQL 社区版（ MySQL 之中唯一的免费版本）有所隐忧。MySQL的创始人麦克尔·维德纽斯以 MySQL 为基础，成立分支计划 MariaDB。如果只是安装并使用 MySQL，不需要 Oracle 的技术支持，或一些企业版工具或插件，或修改 MySQL 源代码并作为闭源的软件等等情形。可以继续使用社区版。本篇介绍如何在 Debian 系统上安装 MySQL，所有命令以普通用户运行，但需要 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/27/python-traverse-dir/" title="python 遍历目录获取所有文件"><img class="post-bg" src="/img/c20.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="python 遍历目录获取所有文件"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/27/python-traverse-dir/" title="python 遍历目录获取所有文件">python 遍历目录获取所有文件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-27T04:44:57.000Z" title="发表于 2022-05-27 12:44:57">2022-05-27</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a></span></div><div class="content">利用 Python 进行文件夹遍历有很多种方法，本篇介绍常用的两种方法，这些方法是内建模块中的方法，速度较快。


os.walk 和 os.scandir两种方法都是在 os 库实现的，分别是 os.walk，os.scandir，其中后者效率更高些。
1import os


1234567def walk(dirs):    files_all = []    for root, d, files in os.walk(dirs):        for file in files:            file_path = os.path.join(root, file)            files_all.append(file_path)    return files_all


12345678def scan(dirs):    files_all = []    for item in os.scandir(dirs):        if item.is_file():            files_all.append(item.path)     ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/25/nvidia-driver-library-version-mismatch/" title="nvidia driver 出现 library version mismatch、couldn't communicate with the NVIDIA driver."><img class="post-bg" src="/img/c29.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="nvidia driver 出现 library version mismatch、couldn't communicate with the NVIDIA driver."></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/25/nvidia-driver-library-version-mismatch/" title="nvidia driver 出现 library version mismatch、couldn't communicate with the NVIDIA driver.">nvidia driver 出现 library version mismatch、couldn't communicate with the NVIDIA driver.</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-25T09:37:38.000Z" title="发表于 2022-05-25 17:37:38">2022-05-25</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-05T08:04:32.953Z" title="更新于 2024-03-05 16:04:32">2024-03-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/nvidia/">nvidia</a></span></div><div class="content">深度学习模型往往需要 GPU 加速计算，因此，需要为服务器安装 NVIDIA 驱动。但，因为系统（如 Ubuntu）有自动更新往往会导致 NVIDIA 驱动版本和库版本不匹配，导致 nvidia-smi 命令无法使用。本篇以 Ubuntu 系统为例，所有命令以普通用户运行，有些命令需要 sudo 权限。


问题描述当在 Ubuntu 系统上安装了显卡驱动后，因为 Ubuntu 上的命令 /usr/bin/unattended-upgrade 会在后台自动更新系统，如安全相关的补丁内容等。有时候，会自动更新 NVIDIA 的驱动（查看自动更新历史：cat /var/log/apt/history.log）。这会导致系统运行中的 NVIDIA 驱动版本（查看方法：cat /proc/driver/nvidia/version）与安装的驱动版本（查看方法：sudo dpkg -l | grep nvidia）不一致。最终导致，查看显卡信息的命令：nvidia-smi 无法使用，报如下错误：
12$ nvidia-smiFailed to initialize NVML: Driver/li ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/23/conda-update-python/" title="conda 更新 python 版本"><img class="post-bg" src="/img/c1.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="conda 更新 python 版本"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/23/conda-update-python/" title="conda 更新 python 版本">conda 更新 python 版本</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-23T03:57:42.000Z" title="发表于 2022-05-23 11:57:42">2022-05-23</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.092Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/conda/">conda</a></span></div><div class="content"> 当使用 Miniconda 安装 Python 后，除了使用虚拟环境外，有时，我们还需要更新主环境中的 Python 版本，本篇介绍如何更新主环境中的 Python 版本到最新。


当主环境版本不需要大版本更新时当主环境的 Python 版本不需要大版本更新时，如最初安装的 Python 版本是 3.9.5，现在 Python 官网已经发布了 3.9.13，此时，我们更新小版本到 Anaconda 中的 Python3.9 到最新。
12345678# 首先更新 conda 到最新，测试中如果当前处在 conda activate 状态下，需要更新 conda 两次conda update conda# 如果遇到更新失败，可尝试强制更新conda update --force conda# 然后更新 python 到 Anaconda 中的最新。注意，一般 Anaconda 中维护的 python 版本会低于官网最新版conda install python=3.9

当主环境版本需要大版本更新时当主环境的 Python 版本需要大版本更新，如最初安装的 Python 版本是 3. ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/18/rustdesk-remote-desktop/" title="远程桌面软件 RustDesk"><img class="post-bg" src="/img/c3.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="远程桌面软件 RustDesk"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/18/rustdesk-remote-desktop/" title="远程桌面软件 RustDesk">远程桌面软件 RustDesk</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-18T04:02:08.000Z" title="发表于 2022-05-18 12:02:08">2022-05-18</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-08T08:01:23.819Z" title="更新于 2024-02-08 16:01:23">2024-02-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/computer-science/">computer science</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/rustdesk/">rustdesk</a></span></div><div class="content">远程办公是近几年比较流行的办公方式，这大多是由于疫情的影响。比较流行的远程桌面控制软件有中国的向日葵、德国的 Teamviewer、中国的 ToDesk、中国的 RustDesk。本篇介绍 RustDesk，不仅是因为它是国产软件，更重要它是开源的，并且能够使用自建中继服务器，这给用户保留了更好的定制性和隐私性。本篇以 Debian 10 为例演示。


安装RustDesk 提供了各平台的版本，如 Windows, Mac, Ubuntu, fedora, Android, iOS, Web 等。安装非常简单，直接从 github rustdesk下载对应的版本就好。
安装后会自动分配一个 ID 和密码，作为唯一标识。当别的客户端连接本电脑时，需要输入该 ID 和密码。
自建中继服务器默认的软件已经提供免费的中继服务器，但带宽有限，缺乏隐私性。因此，RustDesk 提供了可自建中继服务器的方法，使用自己的服务器作为桥梁连接自己的电脑，获得可控的网速以及更高的安全性。
假设你已经有了一台具有公网 IP 的 vps 服务器（硬件要求很低，最低配置的云服务器就可以了，CPU 和内存要求都 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/10/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/10/#content-inner">10</a><span class="page-number current">11</span><a class="page-number" href="/page/12/#content-inner">12</a><span class="space">&hellip;</span><a class="page-number" href="/page/36/#content-inner">36</a><a class="extend next" rel="next" href="/page/12/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/silence.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jinzhong Xu</div><div class="author-info__description">众妙之门</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">392</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">302</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">26</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xujinzh"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xujinzh" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xujinzhong027@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://www.mathscv.com" target="_blank" title="MathsCVBlog"><i class="fab fa-j"></i></a><a class="social-icon" href="https://xujinzh.github.io" target="_blank" title="GitHubBlog"><i class="fab fa-github-alt"></i></a><a class="social-icon" href="https://www.mathscv.com/power" target="_blank" title="MathsCVPower"><i class="fab fa-m"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">日本核污染水强排入海！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/03/18/mac-chrome-shortcut-key/" title="mac 中 chrome 快捷键"><img src="/img/c12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="mac 中 chrome 快捷键"/></a><div class="content"><a class="title" href="/2024/03/18/mac-chrome-shortcut-key/" title="mac 中 chrome 快捷键">mac 中 chrome 快捷键</a><time datetime="2024-03-18T15:13:47.000Z" title="发表于 2024-03-18 23:13:47">2024-03-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/18/vos-cfbi-eccv2020/" title="CFBI, Collaborative Video Object Segmentation by Foreground-Background Integration"><img src="/img/c30.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="CFBI, Collaborative Video Object Segmentation by Foreground-Background Integration"/></a><div class="content"><a class="title" href="/2024/03/18/vos-cfbi-eccv2020/" title="CFBI, Collaborative Video Object Segmentation by Foreground-Background Integration">CFBI, Collaborative Video Object Segmentation by Foreground-Background Integration</a><time datetime="2024-03-18T06:56:55.000Z" title="发表于 2024-03-18 14:56:55">2024-03-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/05/vos-feelvos-cvpr2019/" title="FEELVOS, Fast End-to-End Embedding Learning for Video Object Segmentation"><img src="/img/c24.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FEELVOS, Fast End-to-End Embedding Learning for Video Object Segmentation"/></a><div class="content"><a class="title" href="/2024/03/05/vos-feelvos-cvpr2019/" title="FEELVOS, Fast End-to-End Embedding Learning for Video Object Segmentation">FEELVOS, Fast End-to-End Embedding Learning for Video Object Segmentation</a><time datetime="2024-03-05T08:14:48.000Z" title="发表于 2024-03-05 16:14:48">2024-03-05</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/03/04/vos-davis-eval/" title="Video Object Segmentation 评估指标"><img src="/img/c13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Video Object Segmentation 评估指标"/></a><div class="content"><a class="title" href="/2024/03/04/vos-davis-eval/" title="Video Object Segmentation 评估指标">Video Object Segmentation 评估指标</a><time datetime="2024-03-04T03:43:07.000Z" title="发表于 2024-03-04 11:43:07">2024-03-04</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/02/28/vos-stm-network-iccv2019/" title="Video Object Segmentation using Space-Time Memory Networks"><img src="/img/c13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Video Object Segmentation using Space-Time Memory Networks"/></a><div class="content"><a class="title" href="/2024/02/28/vos-stm-network-iccv2019/" title="Video Object Segmentation using Space-Time Memory Networks">Video Object Segmentation using Space-Time Memory Networks</a><time datetime="2024-02-28T03:20:20.000Z" title="发表于 2024-02-28 11:20:20">2024-02-28</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/"><span class="card-category-list-name">maths</span><span class="card-category-list-count">32</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/algebra/"><span class="card-category-list-name">algebra</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/mathematical-analysis/"><span class="card-category-list-name">mathematical analysis</span><span class="card-category-list-count">22</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/mathematician/"><span class="card-category-list-name">mathematician</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/optimization/"><span class="card-category-list-name">optimization</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/probability/"><span class="card-category-list-name">probability</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/topology/"><span class="card-category-list-name">topology</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/research/"><span class="card-category-list-name">research</span><span class="card-category-list-count">53</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/swap/" style="font-size: 1.2em; color: #999da3">swap</a> <a href="/tags/chattr/" style="font-size: 1.1em; color: #999">chattr</a> <a href="/tags/autossh/" style="font-size: 1.1em; color: #999">autossh</a> <a href="/tags/brew/" style="font-size: 1.1em; color: #999">brew</a> <a href="/tags/pip/" style="font-size: 1.5em; color: #99a9bf">pip</a> <a href="/tags/nginx/" style="font-size: 1.3em; color: #99a1ac">nginx</a> <a href="/tags/nvidia-smi/" style="font-size: 1.1em; color: #999">nvidia-smi</a> <a href="/tags/time/" style="font-size: 1.1em; color: #999">time</a> <a href="/tags/vm/" style="font-size: 1.1em; color: #999">vm</a> <a href="/tags/indefinite-integral/" style="font-size: 1.2em; color: #999da3">indefinite integral</a> <a href="/tags/langchain/" style="font-size: 1.2em; color: #999da3">langchain</a> <a href="/tags/conda/" style="font-size: 1.3em; color: #99a1ac">conda</a> <a href="/tags/udp/" style="font-size: 1.1em; color: #999">udp</a> <a href="/tags/memory/" style="font-size: 1.1em; color: #999">memory</a> <a href="/tags/zip/" style="font-size: 1.3em; color: #99a1ac">zip</a> <a href="/tags/otb/" style="font-size: 1.1em; color: #999">otb</a> <a href="/tags/fund/" style="font-size: 1.1em; color: #999">fund</a> <a href="/tags/gui/" style="font-size: 1.1em; color: #999">gui</a> <a href="/tags/vos/" style="font-size: 1.4em; color: #99a5b6">vos</a> <a href="/tags/nano/" style="font-size: 1.1em; color: #999">nano</a> <a href="/tags/bat/" style="font-size: 1.1em; color: #999">bat</a> <a href="/tags/matplotlib/" style="font-size: 1.3em; color: #99a1ac">matplotlib</a> <a href="/tags/machine-learning/" style="font-size: 1.4em; color: #99a5b6">machine learning</a> <a href="/tags/tcping/" style="font-size: 1.2em; color: #999da3">tcping</a> <a href="/tags/jupyterhub/" style="font-size: 1.2em; color: #999da3">jupyterhub</a> <a href="/tags/volume/" style="font-size: 1.1em; color: #999">volume</a> <a href="/tags/journal/" style="font-size: 1.1em; color: #999">journal</a> <a href="/tags/mbp/" style="font-size: 1.3em; color: #99a1ac">mbp</a> <a href="/tags/history/" style="font-size: 1.1em; color: #999">history</a> <a href="/tags/venv/" style="font-size: 1.1em; color: #999">venv</a> <a href="/tags/linx/" style="font-size: 1.1em; color: #999">linx</a> <a href="/tags/youtube-dl/" style="font-size: 1.1em; color: #999">youtube-dl</a> <a href="/tags/plotly/" style="font-size: 1.1em; color: #999">plotly</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">16</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><span class="card-archive-list-count">1</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">392</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-07-16T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">451.2k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-03-19T01:27:59.162Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By Jinzhong Xu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const findTrueUrl = (array) => {
    Promise.all(array.map(item =>
      fetch(item.url).then(resp => resp.json()).then(data => {
        const urlArray = data.body.match(/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/ig)
        if (data.user.login === 'utterances-bot') {
          return urlArray.pop()
        } else {
          return urlArray.shift()
        }
      })
    )).then(res => {
        array = array.map((i,index)=> {
          return {
            ...i,
            url: res[index]
          }
        })

        saveToLocal.set('github-newest-comments', JSON.stringify(array), 10/(60*24))
        generateHtml(array)
    });
  }

  const getComment = () => {
    fetch('https://api.github.com/repos/xujinzh/xujinzh.github.io/issues/comments?sort=updated&direction=desc&per_page=6&page=1',{
      "headers": {
        Accept: 'application/vnd.github.v3.html+json'
      }
    })
      .then(response => response.json())
      .then(data => {
        const githubArray = data.map(item => {
          return {
            'avatar': item.user.avatar_url,
            'content': changeContent(item.body_html),
            'nick': item.user.login,
            'url': item.issue_url,
            'date': item.updated_at,
            'githubUrl': item.html_url
          }
        })
        findTrueUrl(githubArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('github-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="众,妙,之,门" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>