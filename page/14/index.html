<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>J. Xu - 众妙之门</title><meta name="author" content="Jinzhong Xu"><meta name="copyright" content="Jinzhong Xu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="众妙之门">
<meta property="og:type" content="website">
<meta property="og:title" content="J. Xu">
<meta property="og:url" content="https://xujinzh.github.io/page/14/index.html">
<meta property="og:site_name" content="J. Xu">
<meta property="og:description" content="众妙之门">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xujinzh.github.io/img/silence.jpg">
<meta property="article:author" content="Jinzhong Xu">
<meta property="article:tag" content="数学、计算机视觉、计算机应用技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xujinzh.github.io/img/silence.jpg"><link rel="shortcut icon" href="/img/letter-j.png"><link rel="canonical" href="https://xujinzh.github.io/page/14/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'J. Xu',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-01-31 15:57:21'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/silence.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">384</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">296</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">25</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="J. Xu"><img class="site-icon" src="/img/letter-j.png"/><span class="site-name">J. Xu</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/03/01/how-to-write-a-fund-application/" title="如何写基金申请书"><img class="post-bg" src="/img/c13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="如何写基金申请书"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/03/01/how-to-write-a-fund-application/" title="如何写基金申请书">如何写基金申请书</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-03-01T06:46:38.000Z" title="发表于 2022-03-01 14:46:38">2022-03-01</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.096Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/research/">research</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/research/article/">article</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/fund/">fund</a></span></div><div class="content">国家自然科学基金委员会依据《国家自然科学基金条例》和相关管理规定，每年1月份左右都会发布当年度《国家自然科学基金项目指南》，引导申请人申请国家自然科学基金的资助。今年1月19号发布了2022年国家自然科学基金项目指南。该指南对各类项目的定位、申请条件和相关要求分别进行了介绍与说明，是国家自然科学基金资助工作的重要依据。对于从事科学研究工作的科研人员来说，国家自然科学基金就是生存之本，重要性不言而喻。如何写好一个基金申请书关系到能否拿到当前的资助，更甚至影响到一个科研人员的职业生涯。本篇介绍如何写基金申请书，个人收集整理方便查阅。


国家自然科学基金资助类别要想写好申请书，首先需要明确自己想要申请的基金类别。不同的资助类别面向不同的科研人员，要求也不尽相同。国家自然科学基金有如下资助类别：

面上项目：范围广；资助期限4年；每年2万项左右；平均60万左右；平均资助率17%左右
青年科学基金项目：男性未满35周岁，女性未满40周岁；只能获资1次；资助期限3年；每年2万项左右；30万；平均资助率17%左右
地区科学基金项目：指定地区科研人员；资助期限4年；每年3000项左右；平均35万左右 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/02/24/python-load-online-image/" title="利用 Python 加载网络图片"><img class="post-bg" src="/img/c29.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="利用 Python 加载网络图片"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/24/python-load-online-image/" title="利用 Python 加载网络图片">利用 Python 加载网络图片</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-24T13:57:02.000Z" title="发表于 2022-02-24 21:57:02">2022-02-24</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.100Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a></span></div><div class="content">Python 能够非常方便的进行计算机视觉方向的人工智能编程。利用 Python 可以轻易的处理图片，这主要归功于图像&#x2F;视频处理相关库或包，如 OpenCV, Pillow, imagio, PyTorch, TensorFlow, matplotlib等。本篇介绍，如何利用 Python 在线加载网络图片，方便后续的图片处理，模型训练等。所有代码以 Jupyter notebook 为运行环境。


假设网络上的图片 url 如下：
1url = &quot;https://p1-tt.byteimg.com/origin/pgc-image/fe41801208fa40d394352e0df71e9202?from=pc&quot;

方法1123456from urllib import requestfrom PIL import Imageimg = Image.open(request.urlopen(url))img

方法2123456import requestsfrom PIL import Imageresponse = requests.get(url ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/02/24/use-transmission-cli-download-torrents-from-command-line/" title="使用 transmission-cli 在 linux 命令行下载 torrent"><img class="post-bg" src="/img/c14.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用 transmission-cli 在 linux 命令行下载 torrent"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/24/use-transmission-cli-download-torrents-from-command-line/" title="使用 transmission-cli 在 linux 命令行下载 torrent">使用 transmission-cli 在 linux 命令行下载 torrent</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-24T06:46:56.000Z" title="发表于 2022-02-24 14:46:56">2022-02-24</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.108Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/linux/">linux</a></span></div><div class="content">Transmission 是一种流行的跨平台 BitTorrent 客户端，具有多种风格，包括原生 Mac 和 GTK+ 版本，以及任何使用过 uTorrent 的人都熟悉的桌面 GUI。它是许多 Linux 发行版中的默认 BitTorrent 客户端，transmission-cli 可以在大多数官方存储库中找到。本篇以 Ubuntu 为例。


安装12sudo apt updatesudo apt install transmission-cli

使用方法下载 torrent12345transmission-cli http://releases.ubuntu.com/16.10/ubuntu-16.10-desktop-amd64.iso.torrent -w ~/Downloads# 也可以先把 torrent 文件下载到本地，然后再下载wget http://releases.ubuntu.com/16.10/ubuntu-16.10-desktop-amd64.iso.torrenttransmission-cli ubuntu-16.10-desktop-amd6 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/02/24/use-aria2-download-file-from-command-line-on-linux/" title="利用 aria2 在 linux 命令行下载文件"><img class="post-bg" src="/img/c13.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="利用 aria2 在 linux 命令行下载文件"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/24/use-aria2-download-file-from-command-line-on-linux/" title="利用 aria2 在 linux 命令行下载文件">利用 aria2 在 linux 命令行下载文件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-24T06:20:29.000Z" title="发表于 2022-02-24 14:20:29">2022-02-24</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.108Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/linux/">linux</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/aria2/">aria2</a></span></div><div class="content">aria2 是一个轻量级的多协议和多源命令行下载实用程序。它支持 HTTP&#x2F;HTTPS、FTP、SFTP、BitTorrent 和 Metalink。 aria2 可以通过内置的 JSON-RPC 和 XML-RPC 接口进行操作。它具有多连接下载、轻量级、功能齐全的 BitTorrent 客户端、可元链接（Metalink ）下载和远程控制等特征。下面介绍如何利用该工具在 Ubuntu 上以命令行的形式下载文件。


安装12sudo apt updatesudo apt install aria2 -y

下载文件aria2 工具在命令行上是 aria2c (aria2 client)，可使用该命令下载各种类型的文件，如单个文件、torrent文件、磁力文件等。
根据文件路径下载12345# 直接下载aria2c https://mirrors.zju.edu.cn/ubuntu-releases/20.04.3/ubuntu-20.04.3-desktop-amd64.iso# 下载保存为自定义名字aria2c -o ubuntu20.04.iso https://mi ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/02/19/ubuntu-change-source-list/" title="ubuntu 更改镜像源"><img class="post-bg" src="/img/c2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ubuntu 更改镜像源"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/19/ubuntu-change-source-list/" title="ubuntu 更改镜像源">ubuntu 更改镜像源</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-19T10:07:43.000Z" title="发表于 2022-02-19 18:07:43">2022-02-19</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.108Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ubuntu/">ubuntu</a></span></div><div class="content">Ubuntu 是大家常用的 Linux 操作系统，但有时候安装软件时，会遇到连接错误，导致安装失败。比如，我安装 ffmpeg 时就出现无法安装的问题。那么，如何将镜像源切换为阿里源等，使得安装更快。本篇介绍如何为 Ubuntu 更改镜像源。


修改配置文件修改镜像源需要更改配置文件 etc/apt/sources.list，需要 root 权限。建议更改前，先把原文件保存一份
12# 保存原文件sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak

修改为阿里源，只需要将 etc/apt/sources.list 中的二级地址改为：mirrors.aliyun.com
修改完上述文件后，需要运行如下命令
1sudo apt update

可用的源不同系统版本，需要的源不同。
喜欢清华源的可访问清华源地址，获取可用源信息。
Ubuntu 20.04，focal：1234567891011121314deb http://mirrors.aliyun.com/ubuntu/ focal main restricted univ ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/02/19/ffmpeg-video-processing/" title="FFmpeg 视频处理等相关"><img class="post-bg" src="/img/c18.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FFmpeg 视频处理等相关"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/19/ffmpeg-video-processing/" title="FFmpeg 视频处理等相关">FFmpeg 视频处理等相关</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-19T06:40:01.000Z" title="发表于 2022-02-19 14:40:01">2022-02-19</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.096Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/computer-science/">computer science</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ffmpeg/">ffmpeg</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/video/">video</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/audio/">audio</a></span></div><div class="content">FFmpeg 是一个非常受欢迎的、完备的、跨平台的、开源的用于处理多媒体内容（如音频、视频、字幕及其他相关元数据）的库和工具集。本篇介绍 FFmpeg 的相关概念和基本使用方法。所有命令以 Ubuntu 为例进行介绍，Windows 和 Mac 同样适用。


FFmpeg 安装想要使用 FFmpeg (Linux中对应的程序为 ffmpeg)，必须首先安装它。Ubuntu（Centos 安装 FFmpeg的方法参考我的另一篇：Centos安装ffmpeg。Ubuntu 切换镜像源的方法参考我的另一篇：ubuntu 更改镜像源） 安装 FFmpeg 非常方便，命令如下：
12sudo apt updatesudo apt install ffmpeg

容器在介绍 FFmpeg 处理视频之前，我们需要对视频有个了解。从计算上来说，视频文件是一个容器 (container)，在该容器中包含了视频（图片序列，无声音）、音频、字幕等内容。
常见的视频容器有如下几种，常常以文件后缀名来反映其容器格式：

MP4：常用
MKV：更清晰
WebM：体积更小
AVI：较久远

FFmpeg 支持很多 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/02/18/ubuntu-knownhosts-without-hash/" title="Ubuntu 明文显示 known hosts"><img class="post-bg" src="/img/c4.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ubuntu 明文显示 known hosts"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/18/ubuntu-knownhosts-without-hash/" title="Ubuntu 明文显示 known hosts">Ubuntu 明文显示 known hosts</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-18T11:06:33.000Z" title="发表于 2022-02-18 19:06:33">2022-02-18</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.108Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ubuntu/">ubuntu</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/debian/">debian</a></span></div><div class="content">Ubuntu 通过 SSH 连结服务器时，将服务器的基本信息保存在相应用户名下的 .ssh/known_hosts 文件中，但是，默认保存的信息是通过密文保存的，这虽然安全，但不方便自己查看。如想要删除特定服务器信息时不好查找对应的信息。明文显示并不会造成不安全，在 Mac 系统中默认就是以明文显示。本篇介绍如何将信息保存为明文，方便自己查看。


修改配置只需要修改 SSH 的配置信息就可以设置明文保存 SSH 连结的服务器信息。方法如下：
1234sudo vim /etc/ssh/ssh_config# 将 HashKnownHosts 默认值 yes 改为 noHashKnownHosts no

建议先清空 .ssh/known_hosts ，然后再连接将会以明文方式显示。
</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/02/14/update-debian-kernel/" title="更新 debian 系统内核版本"><img class="post-bg" src="/img/c24.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="更新 debian 系统内核版本"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/14/update-debian-kernel/" title="更新 debian 系统内核版本">更新 debian 系统内核版本</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-14T05:07:27.000Z" title="发表于 2022-02-14 13:07:27">2022-02-14</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.108Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/debian/">debian</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/kernel/">kernel</a></span></div><div class="content">Debian 系统的内核升级的简单方法。本篇以 Debian 10 为例，所有命令均以 root 用户运行。


添加源1echo &quot;deb http://deb.debian.org/debian buster-backports main&quot; &gt; /etc/apt/sources.list.d/backports.list

安装最新内核和头文件查看可安装的内核版本
1apt search linux-image

注意，有些人可能会安装云版本（如，linux-image-.**.-cloud-amd64）的内核，该种版本缺失一些必要的驱动程序，安装后可能导致无法直接使用，如 SSH 连接等。建议按如下方式安装完全版。
1234apt updateapt -t buster-backports install linux-image-amd64apt -t buster-backports install linux-headers-amd64update-grub

重新启动服务器
1shutdown -r now

查看内核版本1uname -r

卸载 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/01/28/flask-web/" title="Python 网站开发之 flask"><img class="post-bg" src="/img/c27.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python 网站开发之 flask"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/28/flask-web/" title="Python 网站开发之 flask">Python 网站开发之 flask</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-28T06:06:14.000Z" title="发表于 2022-01-28 14:06:14">2022-01-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.096Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/web/">web</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/flask/">flask</a></span></div><div class="content">Python 网站开发常用的框架有 Flask, Django 等等，其中 Django 适合大型网站的开发，Flask 是一种微框架，用户自定义程度高。本篇介绍 Flask 开发网站的一些知识。


Flask 安装建议安装 Miniconda，并创建相应 Python 版本的虚拟环境，然后通过如下命令安装 Flask
1pip install Flask

Flask-SQLAlchemy 数据库添加用户和删除用户
1234567891011121314151617from app.models import Userfrom app import bcrypt# 明文密码passwd = &#x27;11111111&#x27;# 添加用户时必须使用加密密码me = User(username=&#x27;me&#x27;, email=&#x27;me@outlook.com&#x27;, password=bcrypt.generate_password_hash(passwd))# 添加用户db.session.add(me)# 提交后才算成功db.session.comm ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/01/23/jupyter-ipython-magic/" title="ipython 中的魔法命令"><img class="post-bg" src="/img/c4.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ipython 中的魔法命令"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/23/jupyter-ipython-magic/" title="ipython 中的魔法命令">ipython 中的魔法命令</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-23T03:16:27.000Z" title="发表于 2022-01-23 11:16:27">2022-01-23</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.096Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/jupyter/">jupyter</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/ipython/">ipython</a></span></div><div class="content">Jupyter lab 或 ipython 中可以方便的书写 python 代码和 markdown 文档。同时，利用魔法命令可以书写 latex 文档、javascript 代码、js 代码、ruby 代码、bash 命令等。另外，魔法命令中还包含一些辅助工具（如 prun、timeit、writefile、loadpy）等等。本篇对其进行简单介绍。


魔法命令魔法命令（注意区别 Python 中的魔法函数）是由 ipython 提供的。查看所有魔法命令，可以在 jupyter lab 中使用如下魔法命令：
1%lsmagic

所有魔法命令分为两类，一类是面向行的魔法命令，一类是面向单元格的魔法命令。分别对应 line 和 cell:
123root:	line:	cell:

行命令是针对单行代码进行使用的，如：
1234%timeit sum((x*2 for x in range(100)))# 输出结果6.73 µs ± 70.8 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)

单元格魔法命令是针对 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/01/21/ls-dir-file/" title="linux 中 ls 仅列出目录或文件"><img class="post-bg" src="/img/c2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="linux 中 ls 仅列出目录或文件"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/21/ls-dir-file/" title="linux 中 ls 仅列出目录或文件">linux 中 ls 仅列出目录或文件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-21T09:03:12.000Z" title="发表于 2022-01-21 17:03:12">2022-01-21</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.100Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/linux/">linux</a></span></div><div class="content">Linux 中的 ls 命令可谓是使用最多的命令之一，有效掌握该命令的能够大大提高效率，下面介绍如何使用 ls 命令仅列出目录或文件。本篇以 Ubuntu 18.04 为例。


仅列出目录12345678910# 不能罗列隐藏目录ls -ld */ls -lF | grep /ls -lF | grep /$# 不罗列隐藏目录ls -l | grep ^d# 能够罗列隐藏目录ls -al | grep ^d

仅列出文件12345# 不罗列隐藏文件ls -l | grep ^-# 能够罗列隐藏文件ls -al | grep ^-



参考链接
Linux Shell 只列出目录的方法
Linux技巧：ls命令只列出子目录名和每行打印一个文件名

</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/13/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/13/#content-inner">13</a><span class="page-number current">14</span><a class="page-number" href="/page/15/#content-inner">15</a><span class="space">&hellip;</span><a class="page-number" href="/page/35/#content-inner">35</a><a class="extend next" rel="next" href="/page/15/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/silence.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jinzhong Xu</div><div class="author-info__description">众妙之门</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">384</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">296</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">25</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xujinzh"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xujinzh" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xujinzhong027@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://www.mathscv.com" target="_blank" title="MathsCVBlog"><i class="fab fa-j"></i></a><a class="social-icon" href="https://xujinzh.github.io" target="_blank" title="GitHubBlog"><i class="fab fa-github-alt"></i></a><a class="social-icon" href="https://www.mathscv.com/power" target="_blank" title="MathsCVPower"><i class="fab fa-m"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">日本核污染水强排入海！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/01/27/linux-grep/" title="linux 三剑客 - 文本查找命令 grep"><img src="/img/c26.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="linux 三剑客 - 文本查找命令 grep"/></a><div class="content"><a class="title" href="/2024/01/27/linux-grep/" title="linux 三剑客 - 文本查找命令 grep">linux 三剑客 - 文本查找命令 grep</a><time datetime="2024-01-27T10:04:18.000Z" title="发表于 2024-01-27 18:04:18">2024-01-27</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/21/ai-internlm-opencompass/" title="基于 OpenCompass 的大模型评测"><img src="/img/c29.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于 OpenCompass 的大模型评测"/></a><div class="content"><a class="title" href="/2024/01/21/ai-internlm-opencompass/" title="基于 OpenCompass 的大模型评测">基于 OpenCompass 的大模型评测</a><time datetime="2024-01-21T05:36:33.000Z" title="发表于 2024-01-21 13:36:33">2024-01-21</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/17/python-torch-multi-gpu-py/" title="Python 多进程使用单机多GPU加速推理"><img src="/img/c26.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python 多进程使用单机多GPU加速推理"/></a><div class="content"><a class="title" href="/2024/01/17/python-torch-multi-gpu-py/" title="Python 多进程使用单机多GPU加速推理">Python 多进程使用单机多GPU加速推理</a><time datetime="2024-01-17T06:53:55.000Z" title="发表于 2024-01-17 14:53:55">2024-01-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/13/ai-internlm-lmdeploy/" title="基于 LMDeploy 的大模型量化和部署"><img src="/img/c11.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="基于 LMDeploy 的大模型量化和部署"/></a><div class="content"><a class="title" href="/2024/01/13/ai-internlm-lmdeploy/" title="基于 LMDeploy 的大模型量化和部署">基于 LMDeploy 的大模型量化和部署</a><time datetime="2024-01-13T06:07:33.000Z" title="发表于 2024-01-13 14:07:33">2024-01-13</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/01/12/ai-internlm-personal-assistant-based-on-xtuner/" title="利用 XTuner 训练书生·浦语私人大模型助手"><img src="/img/c3.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="利用 XTuner 训练书生·浦语私人大模型助手"/></a><div class="content"><a class="title" href="/2024/01/12/ai-internlm-personal-assistant-based-on-xtuner/" title="利用 XTuner 训练书生·浦语私人大模型助手">利用 XTuner 训练书生·浦语私人大模型助手</a><time datetime="2024-01-12T11:03:54.000Z" title="发表于 2024-01-12 19:03:54">2024-01-12</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/"><span class="card-category-list-name">maths</span><span class="card-category-list-count">32</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/algebra/"><span class="card-category-list-name">algebra</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/mathematical-analysis/"><span class="card-category-list-name">mathematical analysis</span><span class="card-category-list-count">22</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/mathematician/"><span class="card-category-list-name">mathematician</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/optimization/"><span class="card-category-list-name">optimization</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/probability/"><span class="card-category-list-name">probability</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/topology/"><span class="card-category-list-name">topology</span><span class="card-category-list-count">1</span></a></li></ul></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/research/"><span class="card-category-list-name">research</span><span class="card-category-list-count">49</span></a></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/autossh/" style="font-size: 1.1em; color: #999">autossh</a> <a href="/tags/opencompass/" style="font-size: 1.1em; color: #999">opencompass</a> <a href="/tags/limit/" style="font-size: 1.1em; color: #999">limit</a> <a href="/tags/node/" style="font-size: 1.1em; color: #999">node</a> <a href="/tags/python/" style="font-size: 1.5em; color: #99a9bf">python</a> <a href="/tags/shutdown/" style="font-size: 1.1em; color: #999">shutdown</a> <a href="/tags/data/" style="font-size: 1.1em; color: #999">data</a> <a href="/tags/vot/" style="font-size: 1.33em; color: #99a2af">vot</a> <a href="/tags/logging/" style="font-size: 1.1em; color: #999">logging</a> <a href="/tags/neural-network/" style="font-size: 1.16em; color: #999b9e">neural network</a> <a href="/tags/numpy/" style="font-size: 1.16em; color: #999b9e">numpy</a> <a href="/tags/teamviewer/" style="font-size: 1.1em; color: #999">teamviewer</a> <a href="/tags/swap/" style="font-size: 1.16em; color: #999b9e">swap</a> <a href="/tags/audio/" style="font-size: 1.1em; color: #999">audio</a> <a href="/tags/timm/" style="font-size: 1.1em; color: #999">timm</a> <a href="/tags/gui/" style="font-size: 1.1em; color: #999">gui</a> <a href="/tags/eof/" style="font-size: 1.1em; color: #999">eof</a> <a href="/tags/matlab/" style="font-size: 1.16em; color: #999b9e">matlab</a> <a href="/tags/real-number/" style="font-size: 1.16em; color: #999b9e">real number</a> <a href="/tags/excel/" style="font-size: 1.1em; color: #999">excel</a> <a href="/tags/nsfc/" style="font-size: 1.1em; color: #999">nsfc</a> <a href="/tags/llm/" style="font-size: 1.39em; color: #99a4b4">llm</a> <a href="/tags/sql/" style="font-size: 1.1em; color: #999">sql</a> <a href="/tags/rar/" style="font-size: 1.16em; color: #999b9e">rar</a> <a href="/tags/centos/" style="font-size: 1.44em; color: #99a7ba">centos</a> <a href="/tags/launchctl/" style="font-size: 1.1em; color: #999">launchctl</a> <a href="/tags/dict/" style="font-size: 1.1em; color: #999">dict</a> <a href="/tags/dice/" style="font-size: 1.1em; color: #999">dice</a> <a href="/tags/machine-learning/" style="font-size: 1.21em; color: #999ea4">machine learning</a> <a href="/tags/Chinese/" style="font-size: 1.1em; color: #999">Chinese</a> <a href="/tags/pip/" style="font-size: 1.27em; color: #99a0a9">pip</a> <a href="/tags/edge-detection/" style="font-size: 1.1em; color: #999">edge-detection</a> <a href="/tags/gradient/" style="font-size: 1.1em; color: #999">gradient</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><span class="card-archive-list-count">10</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">16</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/07/"><span class="card-archive-list-date">七月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/06/"><span class="card-archive-list-date">六月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/05/"><span class="card-archive-list-date">五月 2023</span><span class="card-archive-list-count">5</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">384</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-07-16T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">420.6k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-01-31T07:57:19.197Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By Jinzhong Xu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const findTrueUrl = (array) => {
    Promise.all(array.map(item =>
      fetch(item.url).then(resp => resp.json()).then(data => {
        const urlArray = data.body.match(/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/ig)
        if (data.user.login === 'utterances-bot') {
          return urlArray.pop()
        } else {
          return urlArray.shift()
        }
      })
    )).then(res => {
        array = array.map((i,index)=> {
          return {
            ...i,
            url: res[index]
          }
        })

        saveToLocal.set('github-newest-comments', JSON.stringify(array), 10/(60*24))
        generateHtml(array)
    });
  }

  const getComment = () => {
    fetch('https://api.github.com/repos/xujinzh/xujinzh.github.io/issues/comments?sort=updated&direction=desc&per_page=6&page=1',{
      "headers": {
        Accept: 'application/vnd.github.v3.html+json'
      }
    })
      .then(response => response.json())
      .then(data => {
        const githubArray = data.map(item => {
          return {
            'avatar': item.user.avatar_url,
            'content': changeContent(item.body_html),
            'nick': item.user.login,
            'url': item.issue_url,
            'date': item.updated_at,
            'githubUrl': item.html_url
          }
        })
        findTrueUrl(githubArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('github-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="众,妙,之,门" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>