<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>J. Xu - 众妙之门</title><meta name="author" content="Jinzhong Xu"><meta name="copyright" content="Jinzhong Xu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="众妙之门">
<meta property="og:type" content="website">
<meta property="og:title" content="J. Xu">
<meta property="og:url" content="https://xujinzh.github.io/page/16/index.html">
<meta property="og:site_name" content="J. Xu">
<meta property="og:description" content="众妙之门">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xujinzh.github.io/img/silence.jpg">
<meta property="article:author" content="Jinzhong Xu">
<meta property="article:tag" content="数学、计算机视觉、计算机应用技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xujinzh.github.io/img/silence.jpg"><link rel="shortcut icon" href="/img/letter-j.png"><link rel="canonical" href="https://xujinzh.github.io/page/16/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'J. Xu',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-07-15 19:23:47'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/silence.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">402</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">311</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">27</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="J. Xu"><img class="site-icon" src="/img/letter-j.png"/><span class="site-name">J. Xu</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/02/19/ubuntu-change-source-list/" title="ubuntu 更改镜像源"><img class="post-bg" src="/img/c27.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ubuntu 更改镜像源"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/19/ubuntu-change-source-list/" title="ubuntu 更改镜像源">ubuntu 更改镜像源</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-19T10:07:43.000Z" title="发表于 2022-02-19 18:07:43">2022-02-19</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.108Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ubuntu/">ubuntu</a></span></div><div class="content">Ubuntu 是大家常用的 Linux 操作系统，但有时候安装软件时，会遇到连接错误，导致安装失败。比如，我安装 ffmpeg 时就出现无法安装的问题。那么，如何将镜像源切换为阿里源等，使得安装更快。本篇介绍如何为 Ubuntu 更改镜像源。


修改配置文件修改镜像源需要更改配置文件 etc/apt/sources.list，需要 root 权限。建议更改前，先把原文件保存一份
12# 保存原文件sudo cp /etc/apt/sources.list /etc/apt/sources.list.bak

修改为阿里源，只需要将 etc/apt/sources.list 中的二级地址改为：mirrors.aliyun.com
修改完上述文件后，需要运行如下命令
1sudo apt update

可用的源不同系统版本，需要的源不同。
喜欢清华源的可访问清华源地址，获取可用源信息。
Ubuntu 20.04，focal：1234567891011121314deb http://mirrors.aliyun.com/ubuntu/ focal main restricted univ ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/02/19/ffmpeg-video-processing/" title="FFmpeg 视频处理等相关"><img class="post-bg" src="/img/c23.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="FFmpeg 视频处理等相关"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/19/ffmpeg-video-processing/" title="FFmpeg 视频处理等相关">FFmpeg 视频处理等相关</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-19T06:40:01.000Z" title="发表于 2022-02-19 14:40:01">2022-02-19</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.096Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/computer-science/">computer science</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ffmpeg/">ffmpeg</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/video/">video</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/audio/">audio</a></span></div><div class="content">FFmpeg 是一个非常受欢迎的、完备的、跨平台的、开源的用于处理多媒体内容（如音频、视频、字幕及其他相关元数据）的库和工具集。本篇介绍 FFmpeg 的相关概念和基本使用方法。所有命令以 Ubuntu 为例进行介绍，Windows 和 Mac 同样适用。


FFmpeg 安装想要使用 FFmpeg (Linux中对应的程序为 ffmpeg)，必须首先安装它。Ubuntu（Centos 安装 FFmpeg的方法参考我的另一篇：Centos安装ffmpeg。Ubuntu 切换镜像源的方法参考我的另一篇：ubuntu 更改镜像源） 安装 FFmpeg 非常方便，命令如下：
12sudo apt updatesudo apt install ffmpeg

容器在介绍 FFmpeg 处理视频之前，我们需要对视频有个了解。从计算上来说，视频文件是一个容器 (container)，在该容器中包含了视频（图片序列，无声音）、音频、字幕等内容。
常见的视频容器有如下几种，常常以文件后缀名来反映其容器格式：

MP4：常用
MKV：更清晰
WebM：体积更小
AVI：较久远

FFmpeg 支持很多 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/02/18/ubuntu-knownhosts-without-hash/" title="Ubuntu 明文显示 known hosts"><img class="post-bg" src="/img/c16.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ubuntu 明文显示 known hosts"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/18/ubuntu-knownhosts-without-hash/" title="Ubuntu 明文显示 known hosts">Ubuntu 明文显示 known hosts</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-18T11:06:33.000Z" title="发表于 2022-02-18 19:06:33">2022-02-18</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.108Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ubuntu/">ubuntu</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/debian/">debian</a></span></div><div class="content">Ubuntu 通过 SSH 连结服务器时，将服务器的基本信息保存在相应用户名下的 .ssh/known_hosts 文件中，但是，默认保存的信息是通过密文保存的，这虽然安全，但不方便自己查看。如想要删除特定服务器信息时不好查找对应的信息。明文显示并不会造成不安全，在 Mac 系统中默认就是以明文显示。本篇介绍如何将信息保存为明文，方便自己查看。


修改配置只需要修改 SSH 的配置信息就可以设置明文保存 SSH 连结的服务器信息。方法如下：
1234sudo vim /etc/ssh/ssh_config# 将 HashKnownHosts 默认值 yes 改为 noHashKnownHosts no

建议先清空 .ssh/known_hosts ，然后再连接将会以明文方式显示。
</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/02/14/update-debian-kernel/" title="更新 debian 系统内核版本"><img class="post-bg" src="/img/c3.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="更新 debian 系统内核版本"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/02/14/update-debian-kernel/" title="更新 debian 系统内核版本">更新 debian 系统内核版本</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-02-14T05:07:27.000Z" title="发表于 2022-02-14 13:07:27">2022-02-14</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.108Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/debian/">debian</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/kernel/">kernel</a></span></div><div class="content">Debian 系统的内核升级的简单方法。本篇以 Debian 10 为例，所有命令均以 root 用户运行。


添加源1echo &quot;deb http://deb.debian.org/debian buster-backports main&quot; &gt; /etc/apt/sources.list.d/backports.list

安装最新内核和头文件查看可安装的内核版本
1apt search linux-image

注意，有些人可能会安装云版本（如，linux-image-.**.-cloud-amd64）的内核，该种版本缺失一些必要的驱动程序，安装后可能导致无法直接使用，如 SSH 连接等。建议按如下方式安装完全版。
1234apt updateapt -t buster-backports install linux-image-amd64apt -t buster-backports install linux-headers-amd64update-grub

重新启动服务器
1shutdown -r now

查看内核版本1uname -r

卸载 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/01/28/flask-web/" title="Python 网站开发之 flask"><img class="post-bg" src="/img/c29.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python 网站开发之 flask"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/28/flask-web/" title="Python 网站开发之 flask">Python 网站开发之 flask</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-28T06:06:14.000Z" title="发表于 2022-01-28 14:06:14">2022-01-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.096Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/web/">web</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/flask/">flask</a></span></div><div class="content">Python 网站开发常用的框架有 Flask, Django 等等，其中 Django 适合大型网站的开发，Flask 是一种微框架，用户自定义程度高。本篇介绍 Flask 开发网站的一些知识。


Flask 安装建议安装 Miniconda，并创建相应 Python 版本的虚拟环境，然后通过如下命令安装 Flask
1pip install Flask

Flask-SQLAlchemy 数据库添加用户和删除用户
1234567891011121314151617from app.models import Userfrom app import bcrypt# 明文密码passwd = &#x27;11111111&#x27;# 添加用户时必须使用加密密码me = User(username=&#x27;me&#x27;, email=&#x27;me@outlook.com&#x27;, password=bcrypt.generate_password_hash(passwd))# 添加用户db.session.add(me)# 提交后才算成功db.session.comm ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/01/23/jupyter-ipython-magic/" title="ipython 中的魔法命令"><img class="post-bg" src="/img/c30.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="ipython 中的魔法命令"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/23/jupyter-ipython-magic/" title="ipython 中的魔法命令">ipython 中的魔法命令</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-23T03:16:27.000Z" title="发表于 2022-01-23 11:16:27">2022-01-23</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.096Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/jupyter/">jupyter</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/ipython/">ipython</a></span></div><div class="content">Jupyter lab 或 ipython 中可以方便的书写 python 代码和 markdown 文档。同时，利用魔法命令可以书写 latex 文档、javascript 代码、js 代码、ruby 代码、bash 命令等。另外，魔法命令中还包含一些辅助工具（如 prun、timeit、writefile、loadpy）等等。本篇对其进行简单介绍。


魔法命令魔法命令（注意区别 Python 中的魔法函数）是由 ipython 提供的。查看所有魔法命令，可以在 jupyter lab 中使用如下魔法命令：
1%lsmagic

所有魔法命令分为两类，一类是面向行的魔法命令，一类是面向单元格的魔法命令。分别对应 line 和 cell:
123root:	line:	cell:

行命令是针对单行代码进行使用的，如：
1234%timeit sum((x*2 for x in range(100)))# 输出结果6.73 µs ± 70.8 ns per loop (mean ± std. dev. of 7 runs, 100000 loops each)

单元格魔法命令是针对 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/01/21/ls-dir-file/" title="linux 中 ls 仅列出目录或文件"><img class="post-bg" src="/img/c20.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="linux 中 ls 仅列出目录或文件"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/21/ls-dir-file/" title="linux 中 ls 仅列出目录或文件">linux 中 ls 仅列出目录或文件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-21T09:03:12.000Z" title="发表于 2022-01-21 17:03:12">2022-01-21</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.100Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/linux/">linux</a></span></div><div class="content">Linux 中的 ls 命令可谓是使用最多的命令之一，有效掌握该命令的能够大大提高效率，下面介绍如何使用 ls 命令仅列出目录或文件。本篇以 Ubuntu 18.04 为例。


仅列出目录12345678910# 不能罗列隐藏目录ls -ld */ls -lF | grep /ls -lF | grep /$# 不罗列隐藏目录ls -l | grep ^d# 能够罗列隐藏目录ls -al | grep ^d

仅列出文件12345# 不罗列隐藏文件ls -l | grep ^-# 能够罗列隐藏文件ls -al | grep ^-



参考链接
Linux Shell 只列出目录的方法
Linux技巧：ls命令只列出子目录名和每行打印一个文件名

</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/01/21/python-iterable-iterator-generator/" title="Python 中的迭代器和生成器"><img class="post-bg" src="/img/c12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Python 中的迭代器和生成器"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/21/python-iterable-iterator-generator/" title="Python 中的迭代器和生成器">Python 中的迭代器和生成器</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-21T05:53:51.000Z" title="发表于 2022-01-21 13:53:51">2022-01-21</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.100Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a></span></div><div class="content">Python 中对象的遍历称为迭代，常用 for 循环和 while 循环等实现。那么有哪些对象可以迭代，它们有什么共同特性呢？本篇对可迭代对象、迭代器和生成器进行介绍。


迭代对于 python 中的 list, tuple, dict, set, str，文件对象等容器（数据的集合，这里不使用集合为了区分 python 中的 set），我们可以使用 for 循环等遍历里面的元素，但没有按照固定的顺序进行：
12for i in set(&quot;a1$.&quot;):    print(i)  # 1 $ a .

对于 C 语言，迭代都是按照索引顺序进行：
123for (i = 0; i &lt; length; i++) &#123;    n = list[i];&#125;

可见，python 的 for 循环的抽象程度是高于 C 的。因此，在 python 中对于没有索引的容器都可以进行迭代。如
12345678910111213d = &#123;&quot;a&quot;: 1, &quot;b&quot;: 2&#125;# 对键进行迭代，对字典迭代默认为 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/01/20/ssh-message-broadcast/" title="SSH 消息聊天与广播"><img class="post-bg" src="/img/c3.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SSH 消息聊天与广播"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/20/ssh-message-broadcast/" title="SSH 消息聊天与广播">SSH 消息聊天与广播</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-20T10:53:47.000Z" title="发表于 2022-01-20 18:53:47">2022-01-20</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/computer-science/">computer science</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ssh/">ssh</a></span></div><div class="content">通过 SSH 连接到远端主机，一般会打开一个伪终端（pts）。Linux 系统是可进行多用户访问，当你访问远端主机时，别人也可能正在进行访问，当我们需要进行远端主机重启等一些影响别人使用远端主机的行为时，我们需要把重启的消失广播给其他用户。


write 消息聊天使用 write 能够在终端上互相聊天，方法如下：
12345678910# 查看当前登录用户whojinzhongxu pts/2        2022-01-20 19:08 (127.0.0.1)jinzhongxu pts/3        2022-01-20 15:37 (10.2.28.40)# 我当前登录使用的是伪终端 pts/3，想发给 pts/2 实时消息# 发送消息，类似于写信，先写发送对象，回车后写内容，一行回车将直接发送信息给对方write jinzhongxu pts/2hello, I will reboot this computer!!!

此时，登录在伪终端 pts&#x2F;3 的用户终端上就会显示我发生的信息。
查看伪终端的方法还有
123tty# 显示伪终端/dev/pts/2

 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/01/20/ssh-forwarding-more/" title="SSH 转发知识汇总"><img class="post-bg" src="/img/c21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SSH 转发知识汇总"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/20/ssh-forwarding-more/" title="SSH 转发知识汇总">SSH 转发知识汇总</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-20T06:24:00.000Z" title="发表于 2022-01-20 14:24:00">2022-01-20</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/computer-science/">computer science</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ssh/">ssh</a></span></div><div class="content">我这里有个需求，就是如何将公司局域网内的服务器A开发的网站开放到互联网上。公司局域网的服务器A能够通过主路由器访问互联网，但却没有公网 IP，因此，无法在互联网上直接访问A上的网页。通过 SSH 远程端口转发可以实现这一目的。借此，本篇汇总记录一下 SSH 转发的相关知识。本篇以 Ubuntu18.04 为例，所有端口均指 TCP 端口，建议防火墙开放相应的端口，并保证端口没有被占用。


SSH 简介如今，SSH 在 Linux&#x2F;MacOS&#x2F;Windows 上是标配的软件工具。事实上，SSH 是一种网络协议，由芬兰学者 Tatu Ylonen 于 1995 年设计，用于主机之间的加密登录，将登录信息全部加密。现如今，针对该协议开发有各种实现，有商业的，也有开源的，如 OpenSSH 等。
1234# 使用 SSH 以用户 username 登录到主机 host_ip 上ssh username@host_ip# 指定端口登录ssh -p 2222 uername@host_ip

端口可以在 host_ip 上进行修改，方法如下：
123456# 在配置文件中修改 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/01/19/ssh-forwarding-service/" title="SSH 转发的一些记录"><img class="post-bg" src="/img/c2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="SSH 转发的一些记录"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/01/19/ssh-forwarding-service/" title="SSH 转发的一些记录">SSH 转发的一些记录</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-01-19T08:32:51.000Z" title="发表于 2022-01-19 16:32:51">2022-01-19</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/computer-science/">computer science</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/ssh/">ssh</a></span></div><div class="content">使用 ssh 能够访问远程服务器，但是，对于办公室的电脑只有内网 ip 而无法在家直接通过 ssh 访问，有时候不是很方便，然而像 frp 等都被公司禁止使用。本篇介绍 ssh 转发解决上面的问题。


公网服务器设置首先需要购买一个具有公网 ip 的服务器，这里推荐阿里云，腾讯云等，服务器地址选择当地的就好，比如上海等。然后，对服务器进行配置，开放一个转发的端口，比如，2222。最后，需要对 sshd 的配置文件进行修改。
12345sudo vim /etc/ssh/sshd_config# 添加如下内容GatewayPorts yes# 重启 sshdsudo systemctl restart sshd.service

为什么设置 GatewayPorts yes 呢？这是因为，默认情况下，OpenSSH 只允许从服务器主机连接到远程转发端口。GatewayPorts no 能够防止从服务器计算机外部连接到转发端口。也就是说，只能服务器自己连接自己的端口实现访问内网的端口，而外部的服务器不能连接。其实，查看端口占用（sudo netstat -tunlp | grep 222 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/15/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/15/#content-inner">15</a><span class="page-number current">16</span><a class="page-number" href="/page/17/#content-inner">17</a><span class="space">&hellip;</span><a class="page-number" href="/page/37/#content-inner">37</a><a class="extend next" rel="next" href="/page/17/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/silence.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jinzhong Xu</div><div class="author-info__description">众妙之门</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">402</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">311</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">27</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xujinzh"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xujinzh" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xujinzhong027@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://www.mathscv.com" target="_blank" title="MathsCVBlog"><i class="fab fa-j"></i></a><a class="social-icon" href="https://xujinzh.github.io" target="_blank" title="GitHubBlog"><i class="fab fa-github-alt"></i></a><a class="social-icon" href="https://www.mathscv.com/power" target="_blank" title="MathsCVPower"><i class="fab fa-m"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">日本核污染水强排入海！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/07/09/ai-pytorch-model-infer-acc-onnx-tensorrt/" title="使用 tensorrt 加速 pytorch 模型推理"><img src="/img/c15.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="使用 tensorrt 加速 pytorch 模型推理"/></a><div class="content"><a class="title" href="/2024/07/09/ai-pytorch-model-infer-acc-onnx-tensorrt/" title="使用 tensorrt 加速 pytorch 模型推理">使用 tensorrt 加速 pytorch 模型推理</a><time datetime="2024-07-09T11:25:01.000Z" title="发表于 2024-07-09 19:25:01">2024-07-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/09/linux-vlc-root/" title="Ubuntu 上安装 vlc 并使用 root 用户播放"><img src="/img/c17.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="Ubuntu 上安装 vlc 并使用 root 用户播放"/></a><div class="content"><a class="title" href="/2024/07/09/linux-vlc-root/" title="Ubuntu 上安装 vlc 并使用 root 用户播放">Ubuntu 上安装 vlc 并使用 root 用户播放</a><time datetime="2024-07-09T01:05:21.000Z" title="发表于 2024-07-09 09:05:21">2024-07-09</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/07/02/ai-llm-deploy-simple/" title="本地大模型部署方案之一：ollama 和 open webui"><img src="/img/c26.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="本地大模型部署方案之一：ollama 和 open webui"/></a><div class="content"><a class="title" href="/2024/07/02/ai-llm-deploy-simple/" title="本地大模型部署方案之一：ollama 和 open webui">本地大模型部署方案之一：ollama 和 open webui</a><time datetime="2024-07-02T11:10:49.000Z" title="发表于 2024-07-02 19:10:49">2024-07-02</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/19/nvidia-smi-memory-release/" title="NVIDIA GPU 显存释放"><img src="/img/c18.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NVIDIA GPU 显存释放"/></a><div class="content"><a class="title" href="/2024/04/19/nvidia-smi-memory-release/" title="NVIDIA GPU 显存释放">NVIDIA GPU 显存释放</a><time datetime="2024-04-19T10:11:54.000Z" title="发表于 2024-04-19 18:11:54">2024-04-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/18/linux-virtualbox-vboxmanage-useage/" title="vboxmange 管理 virtualbox 虚拟机"><img src="/img/c27.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vboxmange 管理 virtualbox 虚拟机"/></a><div class="content"><a class="title" href="/2024/04/18/linux-virtualbox-vboxmanage-useage/" title="vboxmange 管理 virtualbox 虚拟机">vboxmange 管理 virtualbox 虚拟机</a><time datetime="2024-04-18T12:20:25.000Z" title="发表于 2024-04-18 20:20:25">2024-04-18</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/"><span class="card-category-list-name">maths</span><span class="card-category-list-count">34</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/algebra/"><span class="card-category-list-name">algebra</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/application/"><span class="card-category-list-name">application</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/mathematical-analysis/"><span class="card-category-list-name">mathematical analysis</span><span class="card-category-list-count">22</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/mathematician/"><span class="card-category-list-name">mathematician</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/optimization/"><span class="card-category-list-name">optimization</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/probability/"><span class="card-category-list-name">probability</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/topology/"><span class="card-category-list-name">topology</span><span class="card-category-list-count">1</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/cmake/" style="font-size: 1.37em; color: #99a4b2">cmake</a> <a href="/tags/image/" style="font-size: 1.23em; color: #999ea6">image</a> <a href="/tags/nlp/" style="font-size: 1.1em; color: #999">nlp</a> <a href="/tags/mount/" style="font-size: 1.1em; color: #999">mount</a> <a href="/tags/Leibniz/" style="font-size: 1.1em; color: #999">Leibniz</a> <a href="/tags/taylor-s-formula/" style="font-size: 1.1em; color: #999">taylor's formula</a> <a href="/tags/cassandra/" style="font-size: 1.1em; color: #999">cassandra</a> <a href="/tags/npm/" style="font-size: 1.23em; color: #999ea6">npm</a> <a href="/tags/kafka-eagle/" style="font-size: 1.1em; color: #999">kafka-eagle</a> <a href="/tags/swap/" style="font-size: 1.23em; color: #999ea6">swap</a> <a href="/tags/matrix/" style="font-size: 1.23em; color: #999ea6">matrix</a> <a href="/tags/bbr/" style="font-size: 1.1em; color: #999">bbr</a> <a href="/tags/windows/" style="font-size: 1.5em; color: #99a9bf">windows</a> <a href="/tags/whl/" style="font-size: 1.1em; color: #999">whl</a> <a href="/tags/rar/" style="font-size: 1.23em; color: #999ea6">rar</a> <a href="/tags/reboot/" style="font-size: 1.1em; color: #999">reboot</a> <a href="/tags/lasttr/" style="font-size: 1.1em; color: #999">lasttr</a> <a href="/tags/youtube-dl/" style="font-size: 1.1em; color: #999">youtube-dl</a> <a href="/tags/rsync/" style="font-size: 1.1em; color: #999">rsync</a> <a href="/tags/cpulimit/" style="font-size: 1.1em; color: #999">cpulimit</a> <a href="/tags/venv/" style="font-size: 1.1em; color: #999">venv</a> <a href="/tags/sogou/" style="font-size: 1.1em; color: #999">sogou</a> <a href="/tags/ollama/" style="font-size: 1.1em; color: #999">ollama</a> <a href="/tags/markdown/" style="font-size: 1.37em; color: #99a4b2">markdown</a> <a href="/tags/filebrowser/" style="font-size: 1.1em; color: #999">filebrowser</a> <a href="/tags/xrdp/" style="font-size: 1.23em; color: #999ea6">xrdp</a> <a href="/tags/schedule/" style="font-size: 1.1em; color: #999">schedule</a> <a href="/tags/AriaNg/" style="font-size: 1.1em; color: #999">AriaNg</a> <a href="/tags/import/" style="font-size: 1.23em; color: #999ea6">import</a> <a href="/tags/zsh/" style="font-size: 1.1em; color: #999">zsh</a> <a href="/tags/jdk/" style="font-size: 1.1em; color: #999">jdk</a> <a href="/tags/mmcv/" style="font-size: 1.23em; color: #999ea6">mmcv</a> <a href="/tags/nat/" style="font-size: 1.1em; color: #999">nat</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/07/"><span class="card-archive-list-date">七月 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">4</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">402</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-07-16T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">467.3k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-07-15T11:23:45.012Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By Jinzhong Xu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const findTrueUrl = (array) => {
    Promise.all(array.map(item =>
      fetch(item.url).then(resp => resp.json()).then(data => {
        const urlArray = data.body.match(/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/ig)
        if (data.user.login === 'utterances-bot') {
          return urlArray.pop()
        } else {
          return urlArray.shift()
        }
      })
    )).then(res => {
        array = array.map((i,index)=> {
          return {
            ...i,
            url: res[index]
          }
        })

        saveToLocal.set('github-newest-comments', JSON.stringify(array), 10/(60*24))
        generateHtml(array)
    });
  }

  const getComment = () => {
    fetch('https://api.github.com/repos/xujinzh/xujinzh.github.io/issues/comments?sort=updated&direction=desc&per_page=6&page=1',{
      "headers": {
        Accept: 'application/vnd.github.v3.html+json'
      }
    })
      .then(response => response.json())
      .then(data => {
        const githubArray = data.map(item => {
          return {
            'avatar': item.user.avatar_url,
            'content': changeContent(item.body_html),
            'nick': item.user.login,
            'url': item.issue_url,
            'date': item.updated_at,
            'githubUrl': item.html_url
          }
        })
        findTrueUrl(githubArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('github-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="众,妙,之,门" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>