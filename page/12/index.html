<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0"><title>J. Xu - 众妙之门</title><meta name="author" content="Jinzhong Xu"><meta name="copyright" content="Jinzhong Xu"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#ffffff"><meta name="description" content="众妙之门">
<meta property="og:type" content="website">
<meta property="og:title" content="J. Xu">
<meta property="og:url" content="https://xujinzh.github.io/page/12/index.html">
<meta property="og:site_name" content="J. Xu">
<meta property="og:description" content="众妙之门">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="https://xujinzh.github.io/img/silence.jpg">
<meta property="article:author" content="Jinzhong Xu">
<meta property="article:tag" content="数学、计算机视觉、计算机应用技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://xujinzh.github.io/img/silence.jpg"><link rel="shortcut icon" href="/img/letter-j.png"><link rel="canonical" href="https://xujinzh.github.io/page/12/index.html"><link rel="preconnect" href="//cdn.jsdelivr.net"/><link rel="preconnect" href="//busuanzi.ibruce.info"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free/css/all.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.min.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = { 
  root: '/',
  algolia: undefined,
  localSearch: {"path":"/search.xml","preload":true,"languages":{"hits_empty":"找不到您查询的内容：${query}"}},
  translate: undefined,
  noticeOutdate: undefined,
  highlight: {"plugin":"highlighjs","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":false},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: undefined,
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#49b1f5","bgDark":"#1f1f1f","position":"bottom-left"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.js',
      css: 'https://cdn.jsdelivr.net/npm/flickr-justified-gallery/dist/fjGallery.min.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: false,
  isAnchor: false,
  percent: {
    toc: true,
    rightside: false,
  }
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  title: 'J. Xu',
  isPost: false,
  isHome: true,
  isHighlightShrink: false,
  isToc: false,
  postUpdate: '2024-04-26 14:04:57'
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
    win.saveToLocal = {
      set: function setWithExpiry(key, value, ttl) {
        if (ttl === 0) return
        const now = new Date()
        const expiryDay = ttl * 86400000
        const item = {
          value: value,
          expiry: now.getTime() + expiryDay,
        }
        localStorage.setItem(key, JSON.stringify(item))
      },

      get: function getWithExpiry(key) {
        const itemStr = localStorage.getItem(key)

        if (!itemStr) {
          return undefined
        }
        const item = JSON.parse(itemStr)
        const now = new Date()

        if (now.getTime() > item.expiry) {
          localStorage.removeItem(key)
          return undefined
        }
        return item.value
      }
    }
  
    win.getScript = url => new Promise((resolve, reject) => {
      const script = document.createElement('script')
      script.src = url
      script.async = true
      script.onerror = reject
      script.onload = script.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        script.onload = script.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(script)
    })
  
    win.getCSS = (url,id = false) => new Promise((resolve, reject) => {
      const link = document.createElement('link')
      link.rel = 'stylesheet'
      link.href = url
      if (id) link.id = id
      link.onerror = reject
      link.onload = link.onreadystatechange = function() {
        const loadState = this.readyState
        if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
        link.onload = link.onreadystatechange = null
        resolve()
      }
      document.head.appendChild(link)
    })
  
      win.activateDarkMode = function () {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#0d0d0d')
        }
      }
      win.activateLightMode = function () {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#ffffff')
        }
      }
      const t = saveToLocal.get('theme')
    
          if (t === 'dark') activateDarkMode()
          else if (t === 'light') activateLightMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
    const detectApple = () => {
      if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
        document.documentElement.classList.add('apple')
      }
    }
    detectApple()
    })(window)</script><meta name="generator" content="Hexo 6.3.0"></head><body><div id="web_bg"></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="avatar-img is-center"><img src="/img/silence.jpg" onerror="onerror=null;src='/img/friend_404.gif'" alt="avatar"/></div><div class="sidebar-site-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">399</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">306</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">27</div></a></div><hr/><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div></div></div><div class="page" id="body-wrap"><header class="not-top-img" id="page-header"><nav id="nav"><span id="blog-info"><a href="/" title="J. Xu"><img class="site-icon" src="/img/letter-j.png"/><span class="site-name">J. Xu</span></a></span><div id="menus"><div id="search-button"><a class="site-page social-icon search" href="javascript:void(0);"><i class="fas fa-search fa-fw"></i><span> 搜索</span></a></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fas fa-home"></i><span> 主页</span></a></div><div class="menus_item"><a class="site-page" href="/archives/"><i class="fa-fw fas fa-archive"></i><span> 归档</span></a></div><div class="menus_item"><a class="site-page" href="/tags/"><i class="fa-fw fas fa-tags"></i><span> 标签</span></a></div><div class="menus_item"><a class="site-page" href="/categories/"><i class="fa-fw fas fa-folder-open"></i><span> 分类</span></a></div><div class="menus_item"><a class="site-page" href="/about/"><i class="fa-fw fas fa-heart"></i><span> 关于</span></a></div></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);"><i class="fas fa-bars fa-fw"></i></a></div></div></nav></header><main class="layout" id="content-inner"><div class="recent-posts" id="recent-posts"><div class="recent-post-item"><div class="post_cover left"><a href="/2022/06/03/debian-install-ftp/" title="在 debian 服务器上安装 ftp"><img class="post-bg" src="/img/c11.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="在 debian 服务器上安装 ftp"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/06/03/debian-install-ftp/" title="在 debian 服务器上安装 ftp">在 debian 服务器上安装 ftp</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-06-03T06:57:18.000Z" title="发表于 2022-06-03 14:57:18">2022-06-03</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.092Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/debian/">debian</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/linux/">linux</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/ftp/">ftp</a></span></div><div class="content">FTP（File Transfer Protocol，文件传输协议）是一种标准的网络协议，用于在远程网络之间传输文件。注意区分 SFTP，其是 SSH 文件传输协议 (SSH File Transfer Protocol)，该协议具有安全性。SCP 代表安全复制协议，它对Linux 系统之间的文件传输进行加密。而 FTP 不具有安全性，是明文传输，但可以搭配 SSL&#x2F;TLS，实现 FTPS 进行安全传输。本篇以 Debian 10 为例，所有命令以普通用户运行，部分命令可能需要 sudo 权限。


安装12sudo apt updatesudo apt install vsftpd

安装后，系统默认会配置自启动，查看服务是否启动
1sudo systemctl status vsftpd

配置申请证书安装后，最重要的就是配置，首先配置 SSL，申请证书请查看我的另一篇：搭配 nginx、cloudflare 和 acme.sh 让网站走 https 协议
这里给出一种自签证书的方法，可以自定义证书有效期。假设，我们要创建一个有效期为 10 年的 2048 为私钥和自签名 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/29/install-bitnami-redmine/" title="bitnami redmine 的安装"><img class="post-bg" src="/img/c11.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="bitnami redmine 的安装"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/29/install-bitnami-redmine/" title="bitnami redmine 的安装">bitnami redmine 的安装</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-29T04:44:55.000Z" title="发表于 2022-05-29 12:44:55">2022-05-29</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.096Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/redmine/">redmine</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/bitnami/">bitnami</a></span></div><div class="content">Redmine 是一个网页界面的项目管理与缺陷跟踪管理系统的自由及开放源代码软件工具，可以同时处理多个项目。它集成了项目管理所需的各项功能，包括日历、燃尽图和甘特图以协助可视化表现项目与时间限制，问题跟踪和版本控制。本篇介绍如何安装 Redmine，以 Bitnami Redmine + Debian 10 为例，所有命令以普通用户 jinzhongxu 运行，但需要 sudo 权限。


下载安装 Redmine这里提供两个版本，均是 bitnami 官网版本：

bitnami-redmine-3.4.6-5-linux-x64-installer.run
bitnami-redmine-4.2.1-3-linux-x64-installer.run

本篇以 4.2.1-3 为例，并使用 nginx 作为反向代理。需要注意的是，需要开放个别端口：

3690：svnserve
3306：mysqld
8443：httpd
8080：redmine
80，443：nginx

1234567891011121314151617181920212223242526272829# 版本 ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/28/debian-install-mysql/" title="debian 安装 mysql 数据库"><img class="post-bg" src="/img/c25.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="debian 安装 mysql 数据库"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/28/debian-install-mysql/" title="debian 安装 mysql 数据库">debian 安装 mysql 数据库</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-28T04:16:13.000Z" title="发表于 2022-05-28 12:16:13">2022-05-28</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.092Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/debian/">debian</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/mysql/">mysql</a></span></div><div class="content">MySQL 数据库一个关系数据库管理系统 (Relational Database Management System, RDBMS) ，最初是有瑞典的MySQL AB 公司开发，2008 年该公司被昇阳微系统收购。2009 年，甲骨文公司收购昇阳微系统公司，MySQL 就成为了 Oracle 产品。其性能高、成本低、可靠性好，一度成为最流行的开源数据库。非常流行的开源软件组合 LAMP 中的 “M” 指的就是 MySQL。MySQL 分为免费的社区版与收费的标准版、企业版等。甲骨文公司收购 MySQL 后，大幅调涨 MySQL 商业版的售价，自由软体社群们对于 Oracle 是否还会持续支援 MySQL 社区版（ MySQL 之中唯一的免费版本）有所隐忧。MySQL的创始人麦克尔·维德纽斯以 MySQL 为基础，成立分支计划 MariaDB。如果只是安装并使用 MySQL，不需要 Oracle 的技术支持，或一些企业版工具或插件，或修改 MySQL 源代码并作为闭源的软件等等情形。可以继续使用社区版。本篇介绍如何在 Debian 系统上安装 MySQL，所有命令以普通用户运行，但需要 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/27/python-traverse-dir/" title="python 遍历目录获取所有文件"><img class="post-bg" src="/img/c28.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="python 遍历目录获取所有文件"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/27/python-traverse-dir/" title="python 遍历目录获取所有文件">python 遍历目录获取所有文件</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-27T04:44:57.000Z" title="发表于 2022-05-27 12:44:57">2022-05-27</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a></span></div><div class="content">利用 Python 进行文件夹遍历有很多种方法，本篇介绍常用的两种方法，这些方法是内建模块中的方法，速度较快。


os.walk 和 os.scandir两种方法都是在 os 库实现的，分别是 os.walk，os.scandir，其中后者效率更高些。
1import os


1234567def walk(dirs):    files_all = []    for root, d, files in os.walk(dirs):        for file in files:            file_path = os.path.join(root, file)            files_all.append(file_path)    return files_all


12345678def scan(dirs):    files_all = []    for item in os.scandir(dirs):        if item.is_file():            files_all.append(item.path)     ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/25/nvidia-driver-library-version-mismatch/" title="nvidia driver 出现 library version mismatch、couldn't communicate with the NVIDIA driver."><img class="post-bg" src="/img/c2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="nvidia driver 出现 library version mismatch、couldn't communicate with the NVIDIA driver."></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/25/nvidia-driver-library-version-mismatch/" title="nvidia driver 出现 library version mismatch、couldn't communicate with the NVIDIA driver.">nvidia driver 出现 library version mismatch、couldn't communicate with the NVIDIA driver.</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-25T09:37:38.000Z" title="发表于 2022-05-25 17:37:38">2022-05-25</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-03-05T08:04:32.953Z" title="更新于 2024-03-05 16:04:32">2024-03-05</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/ubuntu/">ubuntu</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/nvidia/">nvidia</a></span></div><div class="content">深度学习模型往往需要 GPU 加速计算，因此，需要为服务器安装 NVIDIA 驱动。但，因为系统（如 Ubuntu）有自动更新往往会导致 NVIDIA 驱动版本和库版本不匹配，导致 nvidia-smi 命令无法使用。本篇以 Ubuntu 系统为例，所有命令以普通用户运行，有些命令需要 sudo 权限。


问题描述当在 Ubuntu 系统上安装了显卡驱动后，因为 Ubuntu 上的命令 /usr/bin/unattended-upgrade 会在后台自动更新系统，如安全相关的补丁内容等。有时候，会自动更新 NVIDIA 的驱动（查看自动更新历史：cat /var/log/apt/history.log）。这会导致系统运行中的 NVIDIA 驱动版本（查看方法：cat /proc/driver/nvidia/version）与安装的驱动版本（查看方法：sudo dpkg -l | grep nvidia）不一致。最终导致，查看显卡信息的命令：nvidia-smi 无法使用，报如下错误：
12$ nvidia-smiFailed to initialize NVML: Driver/li ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/23/conda-update-python/" title="conda 更新 python 版本"><img class="post-bg" src="/img/c5.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="conda 更新 python 版本"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/23/conda-update-python/" title="conda 更新 python 版本">conda 更新 python 版本</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-23T03:57:42.000Z" title="发表于 2022-05-23 11:57:42">2022-05-23</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.092Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/conda/">conda</a></span></div><div class="content"> 当使用 Miniconda 安装 Python 后，除了使用虚拟环境外，有时，我们还需要更新主环境中的 Python 版本，本篇介绍如何更新主环境中的 Python 版本到最新。


当主环境版本不需要大版本更新时当主环境的 Python 版本不需要大版本更新时，如最初安装的 Python 版本是 3.9.5，现在 Python 官网已经发布了 3.9.13，此时，我们更新小版本到 Anaconda 中的 Python3.9 到最新。
12345678# 首先更新 conda 到最新，测试中如果当前处在 conda activate 状态下，需要更新 conda 两次conda update conda# 如果遇到更新失败，可尝试强制更新conda update --force conda# 然后更新 python 到 Anaconda 中的最新。注意，一般 Anaconda 中维护的 python 版本会低于官网最新版conda install python=3.9

当主环境版本需要大版本更新时当主环境的 Python 版本需要大版本更新，如最初安装的 Python 版本是 3. ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/18/rustdesk-remote-desktop/" title="远程桌面软件 RustDesk"><img class="post-bg" src="/img/c21.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="远程桌面软件 RustDesk"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/18/rustdesk-remote-desktop/" title="远程桌面软件 RustDesk">远程桌面软件 RustDesk</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-18T04:02:08.000Z" title="发表于 2022-05-18 12:02:08">2022-05-18</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-02-08T08:01:23.819Z" title="更新于 2024-02-08 16:01:23">2024-02-08</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/computer-science/">computer science</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/rustdesk/">rustdesk</a></span></div><div class="content">远程办公是近几年比较流行的办公方式，这大多是由于疫情的影响。比较流行的远程桌面控制软件有中国的向日葵、德国的 Teamviewer、中国的 ToDesk、中国的 RustDesk。本篇介绍 RustDesk，不仅是因为它是国产软件，更重要它是开源的，并且能够使用自建中继服务器，这给用户保留了更好的定制性和隐私性。本篇以 Debian 10 为例演示。


安装RustDesk 提供了各平台的版本，如 Windows, Mac, Ubuntu, fedora, Android, iOS, Web 等。安装非常简单，直接从 github rustdesk下载对应的版本就好。
安装后会自动分配一个 ID 和密码，作为唯一标识。当别的客户端连接本电脑时，需要输入该 ID 和密码。
自建中继服务器默认的软件已经提供免费的中继服务器，但带宽有限，缺乏隐私性。因此，RustDesk 提供了可自建中继服务器的方法，使用自己的服务器作为桥梁连接自己的电脑，获得可控的网速以及更高的安全性。
假设你已经有了一台具有公网 IP 的 vps 服务器（硬件要求很低，最低配置的云服务器就可以了，CPU 和内存要求都 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/17/pandoc/" title="pandoc 标记语言转换工具"><img class="post-bg" src="/img/c23.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="pandoc 标记语言转换工具"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/17/pandoc/" title="pandoc 标记语言转换工具">pandoc 标记语言转换工具</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-17T05:36:05.000Z" title="发表于 2022-05-17 13:36:05">2022-05-17</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.100Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/computer-science/">computer science</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/pandoc/">pandoc</a></span></div><div class="content">Pandoc 是使用 Haskell 语言编写的一款跨平台、自由开源及命令行界面的标记语言转换工具，可实现不同标记语言间的格式转换，堪称该领域中的“瑞士军刀”。本篇以 Ubuntu 18.04 为例进行演示。


安装安装  pandoc  可以通过如下方法
12sudo apt updatesudo apt install pandoc

示例使用 pandoc 可以进行很多种文本格式的转换，如 docx, markdown, textile, pdf 等等。下表更详细的列出：



Pandoc 可读取的源格式
Pandoc 可生成的目标格式



Markdown
HTML格式：包括XHTML，HTML5及HTML slide


reStructuredText
文字处理软件格式：包括docx、odt、OpenDocument XML


Textile
电子书格式：包括EPUB（第2版及第3版）、FictionBook2


HTML
技术文档格式：包括DocBook、GNU TexInfo、Groff manpages、Haddock


DocBook
页面布局格式：In ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/17/python-round/" title="python 中的小数舍入方法"><img class="post-bg" src="/img/c4.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="python 中的小数舍入方法"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/17/python-round/" title="python 中的小数舍入方法">python 中的小数舍入方法</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-17T04:09:30.000Z" title="发表于 2022-05-17 12:09:30">2022-05-17</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.104Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/python/">python</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/python/">python</a></span></div><div class="content">数学中，四舍五入是我们经常使用的，用来对小数保留有效位精度，得到近似值，节省书写，如 $3.141592653589793… \approx 3.14$，这同样也方便记忆一些无理数的近似值，当计算时也比较方便。但除了四舍五入，还存在一些其他的小数舍入方法，如“四舍六入五成双”等。Python 中内置的 round 函数采用哪种舍入方法呢？


四舍五入四舍五入是我们小学时就学习的一种小数舍入方法。如
13.141592653589793...

保留 3 位小数，则为
13.142

因为，第 4 位是数值 5，根据四舍五入原则（小于等于 4 的舍去，大于等于 5 的舍入进 1），因此，进行舍入进 1.
四舍六入五成双四舍六入五成双和四舍五入的区别就是，当舍入位后没有数值，且舍入位是 5 时，需要根据舍入位前面一位的数值奇偶性进行舍入。
基本原则是：

当舍入位小于等于 4 时，舍去；
当舍入位大于等于 6 时，舍入进 1；
当舍入位等于 5 时，分两种情况：1）舍入位 5 后面有数值，则舍入进 1；2）舍入位 5 后面没有数值，看舍入位 5 前面的数值，当其是奇数时，舍入进 1，当其 ...</div></div></div><div class="recent-post-item"><div class="post_cover right"><a href="/2022/05/07/linux-cpulimit/" title="linux 中利用 cpulimit 限制 CPU 使用率"><img class="post-bg" src="/img/c26.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="linux 中利用 cpulimit 限制 CPU 使用率"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/07/linux-cpulimit/" title="linux 中利用 cpulimit 限制 CPU 使用率">linux 中利用 cpulimit 限制 CPU 使用率</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-07T10:07:40.000Z" title="发表于 2022-05-07 18:07:40">2022-05-07</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.100Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/linux/">linux</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/linux/">linux</a><span class="article-meta-link">•</span><a class="article-meta__tags" href="/tags/cpulimit/">cpulimit</a></span></div><div class="content">CPU 的使用率过高会影响 Linux 系统的使用体验，如导致 CPU 温度过高，影响使用寿命等。本篇介绍如何限制 CPU 使用率，保持 Linux 系统的正常、稳定运行。以 Ubuntu 18.04 为例，所有命令以普通用户运行。


安装 cpulimitUbuntu&#x2F;Debian 系统安装方法如下：
12sudo apt updatesudo apt install cpulimit

Centos&#x2F;RedHat 系统安装方法如下：
1sudo yum install cpulimit

使用方法123# NUM 为整数值，默认为对 1 个 CPU的限制，多个 CPU 时可以累计，如 NUM * CPU_NUM# PID 为进程 ID，限制该进程的 CPU 使用率为 NUM%cpulimit -l NUM -p PID

常用参数：

-e	按照程序名限制；

-P    按照程序绝对路径限制；

-b     后台运行 cpulimit；

-f      前台运行；

-l      允许的CPU百分比，最低为1%.


注意：

更多参数可通过 man  ...</div></div></div><div class="recent-post-item"><div class="post_cover left"><a href="/2022/05/05/http-status-code/" title="http 状态码"><img class="post-bg" src="/img/c23.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="http 状态码"></a></div><div class="recent-post-info"><a class="article-title" href="/2022/05/05/http-status-code/" title="http 状态码">http 状态码</a><div class="article-meta-wrap"><span class="post-meta-date"><i class="far fa-calendar-alt"></i><span class="article-meta-label">发表于</span><time class="post-meta-date-created" datetime="2022-05-05T08:45:55.000Z" title="发表于 2022-05-05 16:45:55">2022-05-05</time><span class="article-meta-separator">|</span><i class="fas fa-history"></i><span class="article-meta-label">更新于</span><time class="post-meta-date-updated" datetime="2024-01-30T15:35:56.096Z" title="更新于 2024-01-30 23:35:56">2024-01-30</time></span><span class="article-meta"><span class="article-meta-separator">|</span><i class="fas fa-inbox"></i><a class="article-meta__categories" href="/categories/technology/">technology</a><i class="fas fa-angle-right article-meta-link"></i><a class="article-meta__categories" href="/categories/technology/computer-science/">computer science</a></span><span class="article-meta tags"><span class="article-meta-separator">|</span><i class="fas fa-tag"></i><a class="article-meta__tags" href="/tags/http/">http</a></span></div><div class="content">在进行网站开发中，总会遇到状态码解读问题，本篇梳理各种状态码的意义。


http 状态码分类


分类
分类描述



1**
请求已被接受，需要继续处理


2**
成功，操作被成功接收并处理


3**
重定向，需要进一步的操作以完成请求


4**
客户端错误，请求包含语法错误或无法完成请求


5**
服务器错误，服务器在处理请求的过程中发生了错误


http 状态码意义


状态码
状态码意义



100
这个临时响应是用来通知客户端它的部分请求已经被服务器接收，且仍未被拒绝。客户端应当继续发送请求的剩余部分，或者如果请求已经完成，忽略这个响应。


101
服务器根据客户端的请求切换协议。只能切换到更高级的协议，例如，切换到HTTP的新版本协议。


102
由WebDAV（RFC 2518）扩展的状态码，代表处理将被继续执行。


200
请求成功。一般用于GET与POST请求，出现此状态码是表示正常状态。


201
已创建。成功请求并创建了新的资源


202
已接受。已经接受请求，但未处理完成


203
服务器已成功处理了请求，但返回的实体头部元信息不是在原 ...</div></div></div><nav id="pagination"><div class="pagination"><a class="extend prev" rel="prev" href="/page/11/#content-inner"><i class="fas fa-chevron-left fa-fw"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/11/#content-inner">11</a><span class="page-number current">12</span><a class="page-number" href="/page/13/#content-inner">13</a><span class="space">&hellip;</span><a class="page-number" href="/page/37/#content-inner">37</a><a class="extend next" rel="next" href="/page/13/#content-inner"><i class="fas fa-chevron-right fa-fw"></i></a></div></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="is-center"><div class="avatar-img"><img src="/img/silence.jpg" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__name">Jinzhong Xu</div><div class="author-info__description">众妙之门</div></div><div class="card-info-data site-data is-center"><a href="/archives/"><div class="headline">文章</div><div class="length-num">399</div></a><a href="/tags/"><div class="headline">标签</div><div class="length-num">306</div></a><a href="/categories/"><div class="headline">分类</div><div class="length-num">27</div></a></div><a id="card-info-btn" target="_blank" rel="noopener" href="https://github.com/xujinzh"><i class="fab fa-github"></i><span>Follow Me</span></a><div class="card-info-social-icons is-center"><a class="social-icon" href="https://github.com/xujinzh" target="_blank" title="Github"><i class="fab fa-github"></i></a><a class="social-icon" href="mailto:xujinzhong027@outlook.com" target="_blank" title="Email"><i class="fas fa-envelope"></i></a><a class="social-icon" href="https://www.mathscv.com" target="_blank" title="MathsCVBlog"><i class="fab fa-j"></i></a><a class="social-icon" href="https://xujinzh.github.io" target="_blank" title="GitHubBlog"><i class="fab fa-github-alt"></i></a><a class="social-icon" href="https://www.mathscv.com/power" target="_blank" title="MathsCVPower"><i class="fab fa-m"></i></a></div></div><div class="card-widget card-announcement"><div class="item-headline"><i class="fas fa-bullhorn fa-shake"></i><span>公告</span></div><div class="announcement_content">日本核污染水强排入海！</div></div><div class="sticky_layout"><div class="card-widget card-recent-post"><div class="item-headline"><i class="fas fa-history"></i><span>最新文章</span></div><div class="aside-list"><div class="aside-list-item"><a class="thumbnail" href="/2024/04/19/nvidia-smi-memory-release/" title="NVIDIA GPU 显存释放"><img src="/img/c2.jpeg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="NVIDIA GPU 显存释放"/></a><div class="content"><a class="title" href="/2024/04/19/nvidia-smi-memory-release/" title="NVIDIA GPU 显存释放">NVIDIA GPU 显存释放</a><time datetime="2024-04-19T10:11:54.000Z" title="发表于 2024-04-19 18:11:54">2024-04-19</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/18/linux-virtualbox-vboxmanage-useage/" title="vboxmange 管理 virtualbox 虚拟机"><img src="/img/c12.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="vboxmange 管理 virtualbox 虚拟机"/></a><div class="content"><a class="title" href="/2024/04/18/linux-virtualbox-vboxmanage-useage/" title="vboxmange 管理 virtualbox 虚拟机">vboxmange 管理 virtualbox 虚拟机</a><time datetime="2024-04-18T12:20:25.000Z" title="发表于 2024-04-18 20:20:25">2024-04-18</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/17/maths-app-svd-image-compression/" title="奇异值分解图像压缩"><img src="/img/c19.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="奇异值分解图像压缩"/></a><div class="content"><a class="title" href="/2024/04/17/maths-app-svd-image-compression/" title="奇异值分解图像压缩">奇异值分解图像压缩</a><time datetime="2024-04-17T08:26:56.000Z" title="发表于 2024-04-17 16:26:56">2024-04-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/17/maths-app-pca-face-recognition/" title="PCA 人脸识别"><img src="/img/c10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="PCA 人脸识别"/></a><div class="content"><a class="title" href="/2024/04/17/maths-app-pca-face-recognition/" title="PCA 人脸识别">PCA 人脸识别</a><time datetime="2024-04-17T06:22:59.000Z" title="发表于 2024-04-17 14:22:59">2024-04-17</time></div></div><div class="aside-list-item"><a class="thumbnail" href="/2024/04/10/install-code-server/" title="code-server 的安装与使用"><img src="/img/c10.jpg" onerror="this.onerror=null;this.src='/img/404.jpg'" alt="code-server 的安装与使用"/></a><div class="content"><a class="title" href="/2024/04/10/install-code-server/" title="code-server 的安装与使用">code-server 的安装与使用</a><time datetime="2024-04-10T13:48:23.000Z" title="发表于 2024-04-10 21:48:23">2024-04-10</time></div></div></div></div><div class="card-widget" id="card-newest-comments"><div class="item-headline"><i class="fas fa-comment-dots"></i><span>最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div><div class="card-widget card-categories"><div class="item-headline">
            <i class="fas fa-folder-open"></i>
            <span>分类</span>
            <a class="card-more-btn" href="/categories/" title="查看更多">
    <i class="fas fa-angle-right"></i></a>
            </div>
            <ul class="card-category-list" id="aside-cat-list">
            <li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/"><span class="card-category-list-name">maths</span><span class="card-category-list-count">34</span></a><ul class="card-category-list child"><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/algebra/"><span class="card-category-list-name">algebra</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/application/"><span class="card-category-list-name">application</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/mathematical-analysis/"><span class="card-category-list-name">mathematical analysis</span><span class="card-category-list-count">22</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/mathematician/"><span class="card-category-list-name">mathematician</span><span class="card-category-list-count">2</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/optimization/"><span class="card-category-list-name">optimization</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/probability/"><span class="card-category-list-name">probability</span><span class="card-category-list-count">1</span></a></li><li class="card-category-list-item "><a class="card-category-list-link" href="/categories/maths/topology/"><span class="card-category-list-name">topology</span><span class="card-category-list-count">1</span></a></li></ul></li>
            </ul></div><div class="card-widget card-tags"><div class="item-headline"><i class="fas fa-tags"></i><span>标签</span></div><div class="card-tag-cloud"><a href="/tags/llm/" style="font-size: 1.5em; color: #99a9bf">llm</a> <a href="/tags/usr/" style="font-size: 1.1em; color: #999">usr</a> <a href="/tags/completeness/" style="font-size: 1.1em; color: #999">completeness</a> <a href="/tags/putty/" style="font-size: 1.1em; color: #999">putty</a> <a href="/tags/code-server/" style="font-size: 1.1em; color: #999">code-server</a> <a href="/tags/cuda/" style="font-size: 1.23em; color: #999ea6">cuda</a> <a href="/tags/java/" style="font-size: 1.37em; color: #99a4b2">java</a> <a href="/tags/snap/" style="font-size: 1.1em; color: #999">snap</a> <a href="/tags/find/" style="font-size: 1.1em; color: #999">find</a> <a href="/tags/compile/" style="font-size: 1.1em; color: #999">compile</a> <a href="/tags/computer/" style="font-size: 1.1em; color: #999">computer</a> <a href="/tags/timm/" style="font-size: 1.1em; color: #999">timm</a> <a href="/tags/application/" style="font-size: 1.1em; color: #999">application</a> <a href="/tags/probability/" style="font-size: 1.1em; color: #999">probability</a> <a href="/tags/argparse/" style="font-size: 1.1em; color: #999">argparse</a> <a href="/tags/nvcc/" style="font-size: 1.1em; color: #999">nvcc</a> <a href="/tags/iso/" style="font-size: 1.1em; color: #999">iso</a> <a href="/tags/numpy/" style="font-size: 1.23em; color: #999ea6">numpy</a> <a href="/tags/web/" style="font-size: 1.23em; color: #999ea6">web</a> <a href="/tags/maven/" style="font-size: 1.1em; color: #999">maven</a> <a href="/tags/top/" style="font-size: 1.1em; color: #999">top</a> <a href="/tags/tensorflow/" style="font-size: 1.1em; color: #999">tensorflow</a> <a href="/tags/gradient/" style="font-size: 1.1em; color: #999">gradient</a> <a href="/tags/gui/" style="font-size: 1.1em; color: #999">gui</a> <a href="/tags/jdk/" style="font-size: 1.1em; color: #999">jdk</a> <a href="/tags/otb/" style="font-size: 1.1em; color: #999">otb</a> <a href="/tags/antiderivatiive/" style="font-size: 1.23em; color: #999ea6">antiderivatiive</a> <a href="/tags/vim/" style="font-size: 1.23em; color: #999ea6">vim</a> <a href="/tags/disk/" style="font-size: 1.1em; color: #999">disk</a> <a href="/tags/hostname/" style="font-size: 1.23em; color: #999ea6">hostname</a> <a href="/tags/hungarian/" style="font-size: 1.1em; color: #999">hungarian</a> <a href="/tags/nano/" style="font-size: 1.1em; color: #999">nano</a> <a href="/tags/tag/" style="font-size: 1.1em; color: #999">tag</a></div></div><div class="card-widget card-archives"><div class="item-headline"><i class="fas fa-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="fas fa-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/04/"><span class="card-archive-list-date">四月 2024</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/03/"><span class="card-archive-list-date">三月 2024</span><span class="card-archive-list-count">6</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/02/"><span class="card-archive-list-date">二月 2024</span><span class="card-archive-list-count">3</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/01/"><span class="card-archive-list-date">一月 2024</span><span class="card-archive-list-count">11</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/11/"><span class="card-archive-list-date">十一月 2023</span><span class="card-archive-list-count">1</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/10/"><span class="card-archive-list-date">十月 2023</span><span class="card-archive-list-count">5</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/09/"><span class="card-archive-list-date">九月 2023</span><span class="card-archive-list-count">4</span></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2023/08/"><span class="card-archive-list-date">八月 2023</span><span class="card-archive-list-count">16</span></a></li></ul></div><div class="card-widget card-webinfo"><div class="item-headline"><i class="fas fa-chart-line"></i><span>网站资讯</span></div><div class="webinfo"><div class="webinfo-item"><div class="item-name">文章数目 :</div><div class="item-count">399</div></div><div class="webinfo-item"><div class="item-name">已运行时间 :</div><div class="item-count" id="runtimeshow" data-publishDate="2019-07-16T16:00:00.000Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总字数 :</div><div class="item-count">465.7k</div></div><div class="webinfo-item"><div class="item-name">本站访客数 :</div><div class="item-count" id="busuanzi_value_site_uv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">本站总访问量 :</div><div class="item-count" id="busuanzi_value_site_pv"><i class="fa-solid fa-spinner fa-spin"></i></div></div><div class="webinfo-item"><div class="item-name">最后更新时间 :</div><div class="item-count" id="last-push-date" data-lastPushDate="2024-04-26T06:04:55.410Z"><i class="fa-solid fa-spinner fa-spin"></i></div></div></div></div></div></div></main><footer id="footer" style="background: transparent"><div id="footer-wrap"><div class="copyright">&copy;2019 - 2024 By Jinzhong Xu</div><div class="framework-info"><span>框架 </span><a target="_blank" rel="noopener" href="https://hexo.io">Hexo</a><span class="footer-separator">|</span><span>主题 </span><a target="_blank" rel="noopener" href="https://github.com/jerryc127/hexo-theme-butterfly">Butterfly</a></div></div></footer></div><div id="rightside"><div id="rightside-config-hide"><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="fas fa-adjust"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="fas fa-arrows-alt-h"></i></button></div><div id="rightside-config-show"><button id="rightside_config" type="button" title="设置"><i class="fas fa-cog fa-spin"></i></button><button id="go-up" type="button" title="回到顶部"><span class="scroll-percent"></span><i class="fas fa-arrow-up"></i></button></div></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/ui/dist/fancybox.umd.min.js"></script><script src="https://cdn.jsdelivr.net/npm/node-snackbar/dist/snackbar.min.js"></script><div class="js-pjax"><script>(() => {
  const $mermaidWrap = document.querySelectorAll('#article-container .mermaid-wrap')
  if ($mermaidWrap.length) {
    window.runMermaid = () => {
      window.loadMermaid = true
      const theme = document.documentElement.getAttribute('data-theme') === 'dark' ? 'dark' : 'default'

      Array.from($mermaidWrap).forEach((item, index) => {
        const mermaidSrc = item.firstElementChild
        const mermaidThemeConfig = '%%{init:{ \'theme\':\'' + theme + '\'}}%%\n'
        const mermaidID = 'mermaid-' + index
        const mermaidDefinition = mermaidThemeConfig + mermaidSrc.textContent
        mermaid.mermaidAPI.render(mermaidID, mermaidDefinition, (svgCode) => {
          mermaidSrc.insertAdjacentHTML('afterend', svgCode)
        })
      })
    }

    const loadMermaid = () => {
      window.loadMermaid ? runMermaid() : getScript('https://cdn.jsdelivr.net/npm/mermaid/dist/mermaid.min.js').then(runMermaid)
    }

    window.pjax ? loadMermaid() : document.addEventListener('DOMContentLoaded', loadMermaid)
  }
})()</script></div><script>window.addEventListener('load', () => {
  const changeContent = (content) => {
    if (content === '') return content

    content = content.replace(/<img.*?src="(.*?)"?[^\>]+>/ig, '[图片]') // replace image link
    content = content.replace(/<a[^>]+?href=["']?([^"']+)["']?[^>]*>([^<]+)<\/a>/gi, '[链接]') // replace url
    content = content.replace(/<pre><code>.*?<\/pre>/gi, '[代码]') // replace code
    content = content.replace(/<[^>]+>/g,"") // remove html tag

    if (content.length > 150) {
      content = content.substring(0,150) + '...'
    }
    return content
  }

  const findTrueUrl = (array) => {
    Promise.all(array.map(item =>
      fetch(item.url).then(resp => resp.json()).then(data => {
        const urlArray = data.body.match(/(https?:\/\/)?([\da-z\.-]+)\.([a-z\.]{2,6})([\/\w \.-]*)*\/?/ig)
        if (data.user.login === 'utterances-bot') {
          return urlArray.pop()
        } else {
          return urlArray.shift()
        }
      })
    )).then(res => {
        array = array.map((i,index)=> {
          return {
            ...i,
            url: res[index]
          }
        })

        saveToLocal.set('github-newest-comments', JSON.stringify(array), 10/(60*24))
        generateHtml(array)
    });
  }

  const getComment = () => {
    fetch('https://api.github.com/repos/xujinzh/xujinzh.github.io/issues/comments?sort=updated&direction=desc&per_page=6&page=1',{
      "headers": {
        Accept: 'application/vnd.github.v3.html+json'
      }
    })
      .then(response => response.json())
      .then(data => {
        const githubArray = data.map(item => {
          return {
            'avatar': item.user.avatar_url,
            'content': changeContent(item.body_html),
            'nick': item.user.login,
            'url': item.issue_url,
            'date': item.updated_at,
            'githubUrl': item.html_url
          }
        })
        findTrueUrl(githubArray)
      }).catch(e => {
        const $dom = document.querySelector('#card-newest-comments .aside-list')
        $dom.innerHTML= "无法获取评论，请确认相关配置是否正确"
      })
  }

  const generateHtml = array => {
    let result = ''

    if (array.length) {
      for (let i = 0; i < array.length; i++) {
        result += '<div class=\'aside-list-item\'>'

        if (true) {
          const name = 'src'
          result += `<a href='${array[i].url}' class='thumbnail'><img ${name}='${array[i].avatar}' alt='${array[i].nick}'></a>`
        }

        result += `<div class='content'>
        <a class='comment' href='${array[i].url}' title='${array[i].content}'>${array[i].content}</a>
        <div class='name'><span>${array[i].nick} / </span><time datetime="${array[i].date}">${btf.diffDate(array[i].date, true)}</time></div>
        </div></div>`
      }
    } else {
      result += '没有评论'
    }

    let $dom = document.querySelector('#card-newest-comments .aside-list')
    $dom.innerHTML= result
    window.lazyLoadInstance && window.lazyLoadInstance.update()
    window.pjax && window.pjax.refresh($dom)
  }

  const newestCommentInit = () => {
    if (document.querySelector('#card-newest-comments .aside-list')) {
      const data = saveToLocal.get('github-newest-comments')
      if (data) {
        generateHtml(JSON.parse(data))
      } else {
        getComment()
      }
    }
  }

  newestCommentInit()
  document.addEventListener('pjax:complete', newestCommentInit)
})</script><canvas class="fireworks" mobile="true"></canvas><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/fireworks.min.js"></script><script src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/activate-power-mode.min.js"></script><script>POWERMODE.colorful = true;
POWERMODE.shake = false;
POWERMODE.mobile = true;
document.body.addEventListener('input', POWERMODE);
</script><script id="click-heart" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-heart.min.js" async="async" mobile="true"></script><script id="click-show-text" src="https://cdn.jsdelivr.net/npm/butterfly-extsrc/dist/click-show-text.min.js" data-mobile="true" data-text="众,妙,之,门" data-fontsize="15px" data-random="false" async="async"></script><script async data-pjax src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script></div><div id="local-search"><div class="search-dialog"><nav class="search-nav"><span class="search-dialog-title">搜索</span><span id="loading-status"></span><button class="search-close-button"><i class="fas fa-times"></i></button></nav><div class="is-center" id="loading-database"><i class="fas fa-spinner fa-pulse"></i><span>  数据库加载中</span></div><div class="search-wrap"><div id="local-search-input"><div class="local-search-box"><input class="local-search-box--input" placeholder="搜索文章" type="text"/></div></div><hr/><div id="local-search-results"></div></div></div><div id="search-mask"></div><script src="/js/search/local-search.js"></script></div></body></html>